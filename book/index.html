<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Природа кода</title>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="/javascripts/codeprocessing.js"></script>
    <script type="text/javascript" src="/processingjs/processing.js"></script>
    <script type="text/javascript" src="/processingjs/lazyloading.js"></script>
    <script type="text/javascript" src="/javascripts/sketchControls.js"></script>
    <script type="text/javascript" src="/javascripts/jquery.fixed.js"></script>
    <script type="text/javascript" charset="utf-8">
        $(document).ready(function () {
            $('#toc-list').fixed({
                'top': '8'
            });
            $('#nav-bar-wrap').fixed({
                'top': '8'
            });

            $('span.c1').each(function () {
                addStylesToCodeLines($(this));
            });
            // $('code').each(function(){ inlineComments($(this)); });
            $('div.source-code').each(function () {
                setRawCodeHeight($(this));
            });
            $('a.toggle').click(function () {
                toggleCodeDisplay($(this));
                return false;
            });
        });
    </script>
    <link rel="stylesheet" href="/stylesheets/fonts.css" type="text/css">
    <link rel="stylesheet" href="/stylesheets/html.css" type="text/css">
    <link rel="stylesheet" href="/stylesheets/code-html.css">
    <script>
        window.onload = function () {
            offsetUps = document.getElementsByClassName('offset-up');
            for (var i = 0; i < offsetUps.length; i++) {
                var element = offsetUps[i];
                var comment = element.getElementsByClassName('code-comment')[0];
                var height = comment.offsetHeight;
                comment.style.top = '-' + (height) + 'px';
            }
        };
    </script>
</head>

<body>
    <div id="navigator">
        <div id="navigator-inner">
            <div id="toc-holder">
                <div id="toc-list">
                    <ul>
                        <li><a href="/">Вступление</a></li>
                        <li><a href="/chapter-1-vectors">1.  Векторы</a></li>
                        <li><a href="/chapter-2-forces">2.  Силы</a></li>
                        <li><a href="/chapter-3-oscillation">3.  Колебания</a></li>
                        <li><a href="/chapter-4-particle-systems">4.  Система частиц</a></li>
                        <li><a href="/chapter-5-physics-libraries">5.  Физическая библиотека</a></li>
                        <li><a href="/chapter-6-autonomous-agents">6.  Автономные субъекты</a></li>
                        <li><a href="/chapter-7-cellular-automata">7.  Клеточные автоматы</a></li>
                        <li><a href="/chapter-8-fractals">8.  Фракталы</a></li>
                        <li><a href="/chapter-9-the-evolution-of-code">9.  Эволюция кода</a></li>
                        <li><a href="/chapter-10-neural-networks">10.  Нейронные сети</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div id="top">
        <div id="header">
            <h1><a href="/">Природа кода</a></h1>
        </div>
    </div>
    <div id="middle">
        <div id="container">
            <a id="_introduction" style="display: block;"></a>
            <h2 id="introduction">Вступление</h2>
            <blockquote>
                “Единство с природой - это не про меня.” (I am two with nature.)
                <span class="attribution">
— Вуди Аллен
</span>
            </blockquote>
            <p>Если вы не представляете что такое Processing (или математика, если на то пошло), это вступление поможет вам
                разобраться, прежде чем мы перейдём к более трудному и сложному материалу. </p>
            <p>В первой главе мы поговорим о концепции вектора и как мы его будем использовать для симуляции движения. Но прежде
                чем перейти к нему, давайте поговорим о том, как будет происходить движение по экрану. Начнём мы с довольно
                известного и простого вида движения-перемещение в случайном направлении.</p>
            <section>
                <a id="intro_section1" style="display: block;"></a>
                <h3 id="i1-random-walks">I.1 Перемещение в случайном направлении (Random walk)</h3>
                <p>Представьте, что вы балансируете на середине бревна. Каждые десять секунд вы подбрасываете монетку. Орел,
                    делаем шаг вперёд. Решка, делаем шаг назад. Это случайно перемещение на самом деле серия случайностей.
                    Сойдя с бревна на пол вы может повторить это в двух измерениях, подбрасывая монетку и получая такой результат:</p>
                <div class="table">
                    <table>
                        <thead>
                            <tr>
                                <th>Подбрасывание 1 </th>
                                <th>Подбрасывание 2 </th>
                                <th>Результат</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <p>Орёл</p>
                                </td>
                                <td>
                                    <p>Орёл</p>
                                </td>
                                <td>
                                    <p>Шаг вперёд.</p>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <p>Орёл</p>
                                </td>
                                <td>
                                    <p>Решка</p>
                                </td>
                                <td>
                                    <p>Шаг вправо.</p>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <p>Решка</p>
                                </td>
                                <td>
                                    <p>Орёл</p>
                                </td>
                                <td>
                                    <p>Шаг влево.</p>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <p>Решка</p>
                                </td>
                                <td>
                                    <p>Решка</p>
                                </td>
                                <td>
                                    <p>Шаг назад.</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p>Да, это может показаться простым алгоритмом, но тем не менее, перемещение в случайном направлении может использоваться
                    для моделирования процессов из реального мира (движение молекул газа или выигрыша в казино). Мы изучаем
                    это перемещение в книге по трём причинам:</p>
                <div class="list">
                    <ol class="arabic">
                        <li>
                            <p>
                                Нам нужно рассмотреть популярную методологию программирования - ООП (Объектно-ориентированное программирование). Научимся
                                использовать его для перемещения объектов в Processing.
                            </p>
                        </li>
                        <li>
                            <p>
                                Сподвигнет нас задать вопрос, который будет мучать нас на протяжении всей книги: “Как задать правила, по которым будет перемещаться
                                объект?” а так же, “Как реализовать эти правила в Processing?”
                            </p>
                        </li>
                        <li>
                            <p>
                                Для дальнейшего изучения на нужны понимания в случайностях, вероятностях и шуме Перлина. Random walk продемонстрирует нам
                                основные понятия, что поможет нам дальше.
                            </p>
                        </li>
                    </ol>
                </div>
            </section>
            <section>
                <a id="intro_section2" style="display: block;"></a>
                <h3 id="i2-the-random-walker-class">I.2 Основной класс</h3>
                <p>Начнём изучение ООП (Объектно-ориентированное программирование) с создания объекта, который будет перемещаться:
                    <span class="klass">Walker</span>. Это будет только беглый обзор, и если вы не видели ООП раньше, то
                    лучше остановиться и прочитать <a href="http://processing.org/learning/objects/">основы на сайте Processing</a></p>
                <p>Любой <strong><em>объект</em></strong> в Processing может иметь в себе данные и функциональность. Мы рассматриваем
                    <span class="klass">Walker</span> как объект, который содержит данные (его положение на экране) и может
                    выполнять определённые действия (отрисовка себя на экране или перемещение).</p>
                <p><strong><em>Класс</em></strong> это шаблон для построения объектов. Думайте о классе, как о форме для выпечки
                    печенья, а объекты - само печенье.</p>
                <p>Давайте создадим <span class="klass">Walker</span> класс, который потом станет <span class="klass">Walker</span>                    объектом. <span class="klass">Walker</span> нужно только два поля данных - координата по X и по Y.</p>
                <div class="source-code">
                    <a class="toggle" href="#" data-to-raw='Показать исходники' data-to-formatted='Показать отформатированный'>Показать исходники</a>
                    <textarea>class Walker { //[full] У объекта будут эти данные. int x; int y; //[end]
                    </textarea>
                    <div class="code-block">
                        <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="kd">class</span> <span class="nc">Walker</span> <span class="o">{</span></span></pre></code></div>
                        <div class='code-comment-pair stretch'>
                            <div class='code-comment stretch'> У объекта будут эти данные.</div><code><pre><span class='one-line'>  <span class="kt">int</span> <span class="n">x</span><span class="o">;</span></span>
<span class='one-line'>  <span class="kt">int</span> <span class="n">y</span><span class="o">;</span></span></pre></code>
                            <div style='position:relative;clear:both;display:block;height:1px;width:100%;'></div>
                        </div>
                        <div class='code-comment-pair no-comment'><code><pre></pre></code></div>
                    </div>
                    <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
                </div>
                <p>Каждый класс должен иметь конструктор - функция, которая будет вызываться когда объект будет создаваться
                    в первый раз. Вы можете думать об этом как о функции <span class="function">setup()</span>. В ней будут
                    определенны начальные координаты объекта <span class="klass">Walker</span> (в данном случае - центр окна).</p>
                <div class="source-code">
                    <a class="toggle" href="#" data-to-raw='Показать исходники' data-to-formatted='Показать отформатированный'>Показать исходники</a>
                    <textarea> //[full] Конструктор объекта, в нём устанавливаются начальные координаты. Walker() { x = width/2; y = height/2; } //[end]
                    </textarea>
                    <div class="code-block">
                        <div class='code-comment-pair stretch'>
                            <div class='code-comment stretch'> Конструктор объекта, в нём устанавливаются начальные координаты.</div><code><pre><span class='one-line'>  <span class="n">Walker</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'>    <span class="n">x</span> <span class="o">=</span> <span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="o">;</span></span>
<span class='one-line'>    <span class="n">y</span> <span class="o">=</span> <span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="o">;</span></span>
<span class='one-line'>  <span class="o">}</span></span></pre></code>
                            <div style='position:relative;clear:both;display:block;height:1px;width:100%;'></div>
                        </div>
                        <div class='code-comment-pair no-comment'><code><pre></pre></code></div>
                    </div>
                    <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
                </div>
                <p>Наконец, добавим функциональности нашему объекту. В этом примере <span class="klass">Walker</span> имеет
                    две функции. В начале, напишем функцию, которая отображает объект на экране (как белую точку).</p>
                <div class="source-code">
                    <a class="toggle" href="#" data-to-raw='Показать исходники' data-to-formatted='Показать отформатированный'>Показать исходники</a>
                    <textarea> //[full] Функция объекта. void display() { stroke(0); point(x,y); } //[end]
                    </textarea>
                    <div class="code-block">
                        <div class='code-comment-pair stretch'>
                            <div class='code-comment stretch'> Функция объекта.</div><code><pre><span class='one-line'>  <span class="kt">void</span> <span class="nf">display</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'>    <span class="n">stroke</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span></span>
<span class='one-line'>    <span class="n">point</span><span class="o">(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">);</span></span>
<span class='one-line'>  <span class="o">}</span></span></pre></code>
                            <div style='position:relative;clear:both;display:block;height:1px;width:100%;'></div>
                        </div>
                        <div class='code-comment-pair no-comment'><code><pre></pre></code></div>
                    </div>
                    <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
                </div>
                <p>Вторая функция выбирает направление объекта<span class="klass">Walker</span> для следующего шага. Теперь
                    всё становиться немного интереснее. Помните,как вы выбирали направление движения на полу? Сейчас используем
                    Processing для отображения. У нас есть четыре возможных варианта. Шаг вправо будет реализован увеличение
                    x на один <span class="var">x</span> (<span class="var">x</span>++); влево уменьшение x на один
                    <span
                        class="var">x</span> (<span class="var">x--</span>); вперёд, спустившись на один пиксель (<span class="var">y++</span>);
                        и назад, поднявшись на один (<span class="var">y--</span>). Как выбрать из этих вариантов? Ранее
                        мы подбрасывали две монетки. В Processing, однако,когда мы захотим случайно выбрать из списка вариантов,
                        мы выберем случайное число с помощью функции <span class="function">random()</span>.</p>
                <div class="source-code">
                    <a class="toggle" href="#" data-to-raw='Показать исходники' data-to-formatted='Показать отформатированный'>Показать исходники</a>
                    <textarea> void step() { // 0, 1, 2, или 3 int choice = int(random(4));</textarea>
                    <div class="code-block">
                        <div class='code-comment-pair no-comment'><code><pre><span class='one-line'>  <span class="kt">void</span> <span class="nf">step</span><span class="o">()</span> <span class="o">{</span></span></pre></code></div>
                        <div class='code-comment-pair '>
                            <div class='code-comment '>0, 1, 2, или 3</div><code><pre><span class='one-line'>    <span class="kt">int</span> <span class="n">choice</span> <span class="o">=</span> <span class="kt">int</span><span class="o">(</span><span class="n">random</span><span class="o">(</span><span class="mi">4</span><span class="o">));</span></span></pre></code></div>
                    </div>
                    <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
                </div>
                <p>Строка кода выше выбирает случайное число с плавающей запятой (float), находящееся между 0 и 4. Технически
                    говоря, наибольшее число не когда не будет ровно 4.0, оно будет 3.999999999 (с большим кол-вом 9 после
                    запятой); так как процесс перевода к целому числу отсекает всё после запятой, то наибольшее <span class="var">целое число</span>,
                    которе мы можем получить - это 3. Дальше, мы выбирает соответствующее направление (влево, вправо, вверх,
                    или вниз) в зависимости от случайного число.</p>
                <div class="source-code">
                    <a class="toggle" href="#" data-to-raw='Показать исходники' data-to-formatted='Показать отформатированный'>Показать исходники</a>
                    <textarea> //[full] Случайный “выбор” определяет направление движения. if (choice == 0) { x++; } else if (choice == 1) { x--; } else if (choice == 2) { y++; } else { y--; } //[end] } }
                    </textarea>
                    <div class="code-block">
                        <div class='code-comment-pair stretch'>
                            <div class='code-comment stretch'> Случайный “выбор” определяет направление движения.</div><code><pre><span class='one-line'>    <span class="k">if</span> <span class="o">(</span><span class="n">choice</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span></span>
<span class='one-line'>      <span class="n">x</span><span class="o">++;</span></span>
<span class='one-line'>    <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">choice</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span></span>
<span class='one-line'>      <span class="n">x</span><span class="o">--;</span></span>
<span class='one-line'>    <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">choice</span> <span class="o">==</span> <span class="mi">2</span><span class="o">)</span> <span class="o">{</span></span>
<span class='one-line'>      <span class="n">y</span><span class="o">++;</span></span>
<span class='one-line'>    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span></span>
<span class='one-line'>      <span class="n">y</span><span class="o">--;</span></span>
<span class='one-line'>    <span class="o">}</span></span></pre></code>
                            <div style='position:relative;clear:both;display:block;height:1px;width:100%;'></div>
                        </div>
                        <div class='code-comment-pair no-comment'><code><pre><span class='one-line'>  <span class="o">}</span></span>
<span class='one-line'><span class="o">}</span></span></pre></code></div>
                    </div>
                    <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
                </div>
                <p>Когда мы написали класс, настало время создать из него объект <span class="klass">Walker</span> в основной
                    части нашего эскиза—<span class="function">setup()</span> и <span class="function">draw()</span>. Предполагая,
                    что мы будем рассматривать только одну модель движения, мы объявляем глобальную переменную типа
                    <span
                        class="var">Walker</span>.</p>
                <div class="source-code">
                    <a class="toggle" href="#" data-to-raw='Показать исходники' data-to-formatted='Показать отформатированный'>Показать исходники</a>
                    <textarea>// Объект Walker w;</textarea>
                    <div class="code-block">
                        <div class='code-comment-pair '>
                            <div class='code-comment '>Объект Walker</div><code><pre><span class='one-line'><span class="n">Walker</span> <span class="n">w</span><span class="o">;</span></span></pre></code></div>
                    </div>
                    <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
                </div>
                <p>
                    <a id="new-operator-objects-81ed9eb0-253f-0130-ba1d-7cd1c3f718ad" style="display: block;"></a>
                    <a id="objectnew-operator-81edaf10-253f-0130-ba1e-7cd1c3f718ad" style="display: block;"></a>
                </p>
                <p>Далее мы создаём объект в <span class="function">setup()</span> путём вызова конструктора с оператором
                    <span
                        class="function">new</span>.</p>
                <p>
                    <a id="intro_example1" style="display: block;"></a><span class="example">Пример I.1: Традиционное перемещение в случайном направлении</span></p>
                <p><em>Каждый раз, когда вы видите заголовок "Пример", это значит, что данный код можно найти на <a href="http://github.com/shiffman/The-Nature-of-Code-Examples">GitHub</a>.</em></p>
                <div class="source-code">
                    <a class="toggle" href="#" data-to-raw='Показать исходники' data-to-formatted='Показать отформатированный'>Показать исходники</a>
                    <textarea>void setup() { size(640,360); // Создание Walker. w = new Walker(); //[bold] background(255); }
                    </textarea>
                    <div class="code-block">
                        <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'>  <span class="n">size</span><span class="o">(</span><span class="mi">640</span><span class="o">,</span><span class="mi">360</span><span class="o">);</span></span></pre></code></div>
                        <div class='code-comment-pair '>
                            <div class='code-comment '>Создание Walker.</div><code><pre><span class='one-line'>  <strong><span class="n">w</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Walker</span><span class="o">();</span></strong></span>
<span class='one-line'>  <span class="n">background</span><span class="o">(</span><span class="mi">255</span><span class="o">);</span></span>
<span class='one-line'><span class="o">}</span></span></pre></code></div>
                    </div>
                    <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
                </div>
                <p>Наконец, во время каждого вызова <span class="function">draw()</span>, мы просим <span class="klass">Walker</span>                    сделать шаг и отрисовать точку.</p>
                <div class="source-code">
                    <a class="toggle" href="#" data-to-raw='Показать исходники' data-to-formatted='Показать отформатированный'>Показать исходники</a>
                    <textarea>void draw() { //[full] Вызов функции Walker'a. w.step(); //[bold] w.display(); //[bold] //[end] }
                    </textarea>
                    <div class="code-block">
                        <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="kt">void</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span></span></pre></code></div>
                        <div class='code-comment-pair stretch'>
                            <div class='code-comment stretch'> Вызов функции Walker'a</div><code><pre><span class='one-line'>  <strong><span class="n">w</span><span class="o">.</span><span class="na">step</span><span class="o">();</span></strong></span>
<span class='one-line'>  <strong><span class="n">w</span><span class="o">.</span><span class="na">display</span><span class="o">();</span></strong></span></pre></code>
                            <div style='position:relative;clear:both;display:block;height:1px;width:100%;'></div>
                        </div>
                        <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="o">}</span></span></pre></code></div>
                    </div>
                    <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
                </div>
                <p>Поскольку мы отрисовываем фон только один раз в <span class="function">setup()</span>, и не очищаем каждый
                    раз при вызове <span class="function">draw()</span>, мы видим весь путь на нашем Processing окне.</p>
                <div class="image-container screenshot">
                    <canvas data-processing-sources="/processingjs/intro/_I_1_RandomWalkTraditional/_I_1_RandomWalkTraditional.pde /processingjs/intro/_I_1_RandomWalkTraditional/Walker.pde"
                        class="screenshot">
                        <p>Ваш браузер не поддерживает canvas тег.</p>
                    </canvas>
                    <div class="sketch-controls">
                        <button class="reset">СБРОС</button>
                        <button class="pause">ПАУЗА</button>
                    </div>
                </div>
                <p>Есть несколько улучшений, которые мы могли бы сделать. Во-первых, <span class="klass">Walker</span> выбирает
                    из четырех вариантов движения: вверх, вниз, влево, и право. Но любой пиксель на экране имеет восемь соседей,
                    и девятый возможный вариант - оставаться на месте.</p>
                <a id="intro_figure1" style="display: block;"></a>
                <div class="image-container ">
                    <img src="/imgs/intro/intro_01.png" alt="Nature of Code Image" />
                    <p class="caption">Рисунок I.1</p>
                </div>
                <p>Чтобы создать <span class="klass">Walker</span> объект, который может перемещаться на любой соседний пиксель
                    (или остаться на месте), мы будет брать число между 0 и 8 (девять возможных вариантов). Однако, эффективнее
                    будет написать код, который выбирает три возможных варианта для каждой из осей-вдоль оси x (-1, 0, или
                    1) и три возможных варианта для оси y.</p>
                <div class="source-code">
                    <a class="toggle" href="#" data-to-raw='Показать исходники' data-to-formatted='Показать отформатированный'>Показать исходники</a>
                    <textarea> void step() { //[full] Выбирает -1, 0 или 1 int stepx = int(random(3))-1; int stepy = int(random(3))-1; //[end] x += stepx; y += stepy; }
                    </textarea>
                    <div class="code-block">
                        <div class='code-comment-pair no-comment'><code><pre><span class='one-line'>  <span class="kt">void</span> <span class="nf">step</span><span class="o">()</span> <span class="o">{</span></span></pre></code></div>
                        <div class='code-comment-pair stretch'>
                            <div class='code-comment stretch'> Выбирает -1, 0 или 1</div><code><pre><span class='one-line'>    <span class="kt">int</span> <span class="n">stepx</span> <span class="o">=</span> <span class="kt">int</span><span class="o">(</span><span class="n">random</span><span class="o">(</span><span class="mi">3</span><span class="o">))-</span><span class="mi">1</span><span class="o">;</span></span>
<span class='one-line'>    <span class="kt">int</span> <span class="n">stepy</span> <span class="o">=</span> <span class="kt">int</span><span class="o">(</span><span class="n">random</span><span class="o">(</span><span class="mi">3</span><span class="o">))-</span><span class="mi">1</span><span class="o">;</span></span></pre></code>
                            <div style='position:relative;clear:both;display:block;height:1px;width:100%;'></div>
                        </div>
                        <div class='code-comment-pair no-comment'><code><pre><span class='one-line'>    <span class="n">x</span> <span class="o">+=</span> <span class="n">stepx</span><span class="o">;</span></span>
<span class='one-line'>    <span class="n">y</span> <span class="o">+=</span> <span class="n">stepy</span><span class="o">;</span></span>
<span class='one-line'>  <span class="o">}</span></span></pre></code></div>
                    </div>
                    <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
                </div>
                <p>Учитывая это, мы могли бы использовать числа с плавающе запятой (т.е. десятичные числа) для <span class="var">x</span>                    и <span class="var">y</span> и брать число между -1 и 1.</p>
                <div class="source-code">
                    <a class="toggle" href="#" data-to-raw='Показать исходники' data-to-formatted='Показать отформатированный'>Показать исходники</a>
                    <textarea> void step() { //[full] Выбрать любое десятичное число между -1.0 и 1.0 float stepx = random(-1, 1); float stepy = random(-1, 1); //[end] x += stepx; y += stepy; }
                    </textarea>
                    <div class="code-block">
                        <div class='code-comment-pair no-comment'><code><pre><span class='one-line'>  <span class="kt">void</span> <span class="nf">step</span><span class="o">()</span> <span class="o">{</span></span></pre></code></div>
                        <div class='code-comment-pair stretch'>
                            <div class='code-comment stretch'> Выбрать любое десятичное число между -1.0 и 1.0</div><code><pre><span class='one-line'>    <span class="kt">float</span> <span class="n">stepx</span> <span class="o">=</span> <span class="n">random</span><span class="o">(-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span></span>
<span class='one-line'>    <span class="kt">float</span> <span class="n">stepy</span> <span class="o">=</span> <span class="n">random</span><span class="o">(-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span></span></pre></code>
                            <div style='position:relative;clear:both;display:block;height:1px;width:100%;'></div>
                        </div>
                        <div class='code-comment-pair no-comment'><code><pre><span class='one-line'>    <span class="n">x</span> <span class="o">+=</span> <span class="n">stepx</span><span class="o">;</span></span>
<span class='one-line'>    <span class="n">y</span> <span class="o">+=</span> <span class="n">stepy</span><span class="o">;</span></span>
<span class='one-line'>  <span class="o">}</span></span></pre></code></div>
                    </div>
                    <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
                </div>
                <p>Все вариации "традиционного" перемещения в случайном направлении имеют одну общую черту: в любой момент времени,
                    вероятность того, что <span class="klass">Walker</span> сделает шаг в одном направлении равна вероятность
                    шага <span class="klass">Walker</span> в любом другом направлении. Другими словами, если у нас четыре
                    варианта перемещения, то шанс 1 из 4 (или 25%), что <span class="klass">Walker</span> сделает шаг в определённом
                    направлении. С девятью возможными шагами шанс будет 1 к 9 (или 11.1%).</p>
                <p>
                    <p>Глаз радуется, когда смотришь как работает функция <span class="function">random()</span> (Перев. Я не
                        придумал как это перевести :) ). Processing генератор случайных чисел (который работает за кулисами)
                        работает по принципу “равномерного” распределения чисел. Мы можем проверить распределение чисел в
                        Processing каждый раз вычисляя случайное число и выбирая его в качестве высоты для прямоугольника.</p>
                    <div class="image-container screenshot">
                        <canvas data-processing-sources="/processingjs/intro/_I_2_RandomDistribution/_I_2_RandomDistribution.pde" class="screenshot">
                            <p>Ваш браузер не поддерживает canvas тег.</p>
                        </canvas>
                        <div class="sketch-controls">
                            <button class="reset">СБРОС</button>
                            <button class="pause">ПАУЗА</button>
                        </div>
                    </div>
                    <p>
                        <a id="intro_example2" style="display: block;"></a><span class="example">Пример I.2: Распределение случайных чисел</span></p>
                    <div class="source-code">
                        <a class="toggle" href="#" data-to-raw='Показать исходники' data-to-formatted='Показать отформатированный'>Показать исходники</a>
                        <textarea>// Массив в котором находятся все выбранные случайные числа int[] randomCounts; void setup() { size(640,240); randomCounts = new int[20]; } void draw() { background(255); // Выбрать случайный элемент в массиве. int index = int(random(randomCounts.length)); randomCounts[index]++; stroke(0); fill(175); int w = width/randomCounts.length; //[full] Отобразить результаты for (int x = 0; x
                        < randomCounts.length; x++) { rect(x*w,height-randomCounts[x],w-1,randomCounts[x]); } //[end] }</textarea>
                        <div class="code-block">
                            <div class='code-comment-pair '>
                                <div class='code-comment '>Массив в котором находятся все выбранные случайные числа.</div><code><pre><span class='one-line'><span class="kt">int</span><span class="o">[]</span> <span class="n">randomCounts</span><span class="o">;</span></span>
<span class='one-line'> </span>
<span class='one-line'><span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'>  <span class="n">size</span><span class="o">(</span><span class="mi">640</span><span class="o">,</span><span class="mi">240</span><span class="o">);</span></span>
<span class='one-line'>  <span class="n">randomCounts</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="mi">20</span><span class="o">];</span></span>
<span class='one-line'><span class="o">}</span></span>
<span class='one-line'> </span>
<span class='one-line'><span class="kt">void</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'>  <span class="n">background</span><span class="o">(</span><span class="mi">255</span><span class="o">);</span></span>
<span class='one-line'> </span></pre></code></div>
                            <div class='code-comment-pair '>
                                <div class='code-comment '>Выбрать случайный элемент в массиве.</div><code><pre><span class='one-line'>  <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="kt">int</span><span class="o">(</span><span class="n">random</span><span class="o">(</span><span class="n">randomCounts</span><span class="o">.</span><span class="na">length</span><span class="o">));</span></span>
<span class='one-line'>  <span class="n">randomCounts</span><span class="o">[</span><span class="n">index</span><span class="o">]++;</span></span>
<span class='one-line'> </span>
<span class='one-line'>  <span class="n">stroke</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span></span>
<span class='one-line'>  <span class="n">fill</span><span class="o">(</span><span class="mi">175</span><span class="o">);</span></span>
<span class='one-line'>  <span class="kt">int</span> <span class="n">w</span> <span class="o">=</span> <span class="n">width</span><span class="o">/</span><span class="n">randomCounts</span><span class="o">.</span><span class="na">length</span><span class="o">;</span></span></pre></code></div>
                            <div class='code-comment-pair stretch'>
                                <div class='code-comment stretch'> Отобразить результаты</div><code><pre><span class='one-line'>  <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">randomCounts</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">x</span><span class="o">++)</span> <span class="o">{</span></span>
<span class='one-line'>    <span class="n">rect</span><span class="o">(</span><span class="n">x</span><span class="o">*</span><span class="n">w</span><span class="o">,</span><span class="n">height</span><span class="o">-</span><span class="n">randomCounts</span><span class="o">[</span><span class="n">x</span><span class="o">],</span><span class="n">w</span><span class="o">-</span><span class="mi">1</span><span class="o">,</span><span class="n">randomCounts</span><span class="o">[</span><span class="n">x</span><span class="o">]);</span></span>
<span class='one-line'>  <span class="o">}</span></span></pre></code>
                                <div style='position:relative;clear:both;display:block;height:1px;width:100%;'></div>
                            </div>
                            <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="o">}</span></span></pre></code></div>
                        </div>
                        <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
                    </div>
                    <p>В окне выше мы может видеть результат работы. Обратите внимание, что каждая часть графика отличается
                        в высоту. Наша размер выборки (т.е. число случайных чисел) довольно мал и там могут встречаться некоторые
                        расхождения, когда отдельные блоки выбиваются вверх. Со временем, с хорошей генератором случайных
                        чисел, это будет выравнивать.</p>
                    <p>
                        <a id="pseudo-random-numbers-81eed080-253f-0130-ba21-7cd1c3f718ad" style="display: block;"></a>
                        <a id="random-number-generatorspseudo-random-numbers-81eee240-253f-0130-ba22-7cd1c3f718ad" style="display: block;"></a>
                    </p>
                    <div class="note">
                        <h4 id="pseudo-random-numbers">Генератор псевдослучайных чисел</h4>
                        <p>Число, которое мы получаем от функции <span class="function">random()</span> не является действительно
                            случайным, поэтому они извесны как “псевдо-случайные.” Они являются результатом математической
                            функции, которая моделирует "случайность". У этой функции можно найти закономерность вывода ответа,
                            но он на столько большой, что для нас это так же хорошо, как чистая случайность!</p>
                    </div>
                    <div class="example">
                        <a id="intro_exercise1" style="display: block;"></a>
                        <h4 id="exercise-i1">Упражнение I.1</h4>
                        <p>Создать движение, в котором <span class="klass">Walker</span> передвигается в большенстве случаев
                            в одном направлнии. (Мы увидим решение этого в следующем разделе)</p>
                    </div>
            </section>
            <section>
                <a id="intro_section3" style="display: block;"></a>
                <h3 id="i3-probability-and-non-uniform-distributions">I.3 Вероятность и неоднородное распределение</h3>

                <p>Вы помните, как впервые начали программировать в Processing? Возможно, вы хотели нарисовать много кругов
                    на экране и сказали сами себе: “О, я знаю. Я нарисую все эти круги в случайных координатах, со случайным
                    цветом и размером.” В компьютерной графике, зачастую проще всего заполнить систему случайными значениями.
                    В этой книге, однако, мы посмотрим, как смоделировать систему, похожую на то, что мы видим природе. Это
                    может понадобиться для решения проблем связанных с можелированием органической или естестренных процессов.</p>

                <p>С помощью нескольких трюков, мы может изменить результат <span class="function">random()</span> для получания
                    “неоднородное” распределения случайных чисел. Это понадобится на протяжении всей книги, где будет рассмотренно
                    много сценариев применения. Например, когда мы исследуем генетические алгоритмы нам нужно будет производить
                    “выбор”—какая особь будет выбрана, чтобы передать своё ДНК следующему поколению? Помните, что выживает
                    сильнейший? Допустим, у нас есть популяция обезьян. Не каждая обезьянка раст потомство. Для симуляции
                    Дарвиновской эволюции, мы не может просто брать две случайные обезьяны. На нужно, чтобы более “подходяцие”
                    обезьяны были выбранны, нам нужно определять сильнейших. Например, наиболее быстрые и сильные обезьяны
                    могут иметь потомство в 90%, тогда как слабые только в 10%.</p>

                <p>Let’s pause here and take a look at probability’s basic principles. First we’ll examine single event probability,
                    i.e. the likelihood that a given event will occur.</p>
                <p>If you have a system with a certain number of possible outcomes, the probability of the occurrence of a given
                    event equals the number of outcomes that qualify as that event divided by the total number of all possible
                    outcomes. A coin toss is a simple example—it has only two possible outcomes, heads or tails. There is
                    only one way to flip heads. The probability that the coin will turn up heads, therefore, is one divided
                    by two: 1/2 or 50%.</p>
                <p>Take a deck of fifty-two cards. The probability of drawing an ace from that deck is:</p>
                <p><span class="formula">number of aces / number of cards = 4 / 52 = 0.077 = ~ 8%</span></p>
                <p>The probability of drawing a diamond is:</p>
                <p><span class="formula">number of diamonds / number of cards = 13 / 52 = 0.25 = 25%</span></p>
                <p>We can also calculate the probability of multiple events occurring in sequence. To do this, we simply multiply
                    the individual probabilities of each event.</p>
                <p>The probability of a coin turning up heads three times in a row is:</p>
                <p><span class="formula">(1/2) * (1/2) * (1/2) =  1/8 (or 0.125)</span></p>
                <p>…meaning that a coin will turn up heads three times in a row one out of eight times (each “time” being three
                    tosses).</p>
                <div class="example">
                    <a id="intro_exercise2" style="display: block;"></a>
                    <h4 id="exercise-i2">Exercise I.2</h4>
                    <p>What is the probability of drawing two aces in a row from a deck of fifty-two cards?</p>
                </div>
                <p>
                    <a id="arrayscustom-distributions-creating-with-81f17b40-253f-0130-ba2b-7cd1c3f718ad" style="display: block;"></a>
                    <a id="distributions-non-uniformcreating-with-arrays-81f191a0-253f-0130-ba2c-7cd1c3f718ad" style="display: block;"></a>
                    <a id="non-uniform-distributionscreating-with-arrays-81f1a4a0-253f-0130-ba2d-7cd1c3f718ad" style="display: block;"></a>
                    <a id="random-functionnon-uniform-distributions-creating-with-81f1ba10-253f-0130-ba2e-7cd1c3f718ad" style="display: block;"></a>
                </p>
                <p>There are a couple of ways in which we can use the <span class="function">random()</span> function with probability
                    in code. One technique is to fill an array with a selection of numbers—some of which are repeated—then
                    choose random numbers from that array and generate events based on those choices.</p>
                <div class="source-code">
                    <a class="toggle" href="#" data-to-raw='Показать исходники' data-to-formatted='Показать отформатированный'>Показать исходники</a>
                    <textarea>int[] stuff = new int[5] //[full] 1 is stored in the array twice, making it more likely to be picked. stuff[0] = 1; stuff[1] = 1; //[end] stuff[2] = 2; stuff[3] = 3; stuff[4] = 3; // Picking a random element from an array int index = int(random(stuff.length));</textarea>
                    <div class="code-block">
                        <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="kt">int</span><span class="o">[]</span> <span class="n">stuff</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="mi">5</span><span class="o">]</span></span></pre></code></div>
                        <div class='code-comment-pair stretch'>
                            <div class='code-comment stretch'> 1 is stored in the array twice, making it more likely to be picked.</div><code><pre><span class='one-line'><span class="n">stuff</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span></span>
<span class='one-line'><span class="n">stuff</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span></span></pre></code>
                            <div style='position:relative;clear:both;display:block;height:1px;width:100%;'></div>
                        </div>
                        <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="n">stuff</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span> <span class="o">=</span> <span class="mi">2</span><span class="o">;</span></span>
<span class='one-line'><span class="n">stuff</span><span class="o">[</span><span class="mi">3</span><span class="o">]</span> <span class="o">=</span> <span class="mi">3</span><span class="o">;</span></span>
<span class='one-line'><span class="n">stuff</span><span class="o">[</span><span class="mi">4</span><span class="o">]</span> <span class="o">=</span> <span class="mi">3</span><span class="o">;</span></span></pre></code></div>
                        <div class='code-comment-pair '>
                            <div class='code-comment '>Picking a random element from an array</div><code><pre><span class='one-line'><span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="kt">int</span><span class="o">(</span><span class="n">random</span><span class="o">(</span><span class="n">stuff</span><span class="o">.</span><span class="na">length</span><span class="o">));</span></span></pre></code></div>
                    </div>
                    <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
                </div>
                <p>Running this code will produce a 40% chance of printing the value 1, a 20% chance of printing 2, and a 40%
                    chance of printing 3.</p>
                <p>We can also ask for a random number (let’s make it simple and just consider random floating point values
                    between 0 and 1) and allow an event to occur only if our random number is within a certain range. For
                    example:</p>
                <div class="source-code">
                    <a class="toggle" href="#" data-to-raw='Показать исходники' data-to-formatted='Показать отформатированный'>Показать исходники</a>
                    <textarea>// A probability of 10% float prob = 0.10; // A random floating point value between 0 and 1 float r = random(1); //[full] If our random number is less than 0.1, try again! if (r
                        < prob) { // try again! } //[end]</textarea>
                    <div class="code-block">
                        <div class='code-comment-pair '>
                            <div class='code-comment '>A probability of 10%</div><code><pre><span class='one-line'><span class="kt">float</span> <span class="n">prob</span> <span class="o">=</span> <span class="mf">0.10</span><span class="o">;</span></span></pre></code></div>
                        <div class='code-comment-pair '>
                            <div class='code-comment '>A random floating point value between 0 and 1</div><code><pre><span class='one-line'><span class="kt">float</span> <span class="n">r</span> <span class="o">=</span> <span class="n">random</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span></span>
<span class='one-line'> </span></pre></code></div>
                        <div class='code-comment-pair stretch'>
                            <div class='code-comment stretch'> If our random number is less than 0.1, try again!</div><code><pre><span class='one-line'><span class="k">if</span> <span class="o">(</span><span class="n">r</span> <span class="o">&lt;</span> <span class="n">prob</span><span class="o">)</span> <span class="o">{</span></span>
<span class='one-line'>   <span class="c1">// try again!</span></span>
<span class='one-line'><span class="o">}</span></span></pre></code>
                            <div style='position:relative;clear:both;display:block;height:1px;width:100%;'></div>
                        </div>
                        <div class='code-comment-pair no-comment'><code><pre></pre></code></div>
                    </div>
                    <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
                </div>
                <p>This method can also be applied to multiple outcomes. Let’s say that Outcome A has a 60% chance of happening,
                    Outcome B, a 10% chance, and Outcome C, a 30% chance. We implement this in code by picking a random float
                    and seeing into what range it falls.</p>
                <div class="list">
                    <ul>
                        <li>
                            <p><em>between 0.00 and 0.60 (60%) –> Outcome A</em></p>
                        </li>
                        <li>
                            <p><em>between 0.60 and 0.70 (10%) –> Outcome B</em></p>
                        </li>
                        <li>
                            <p><em>between 0.70 and 1.00 (30%) –> Outcome C</em></p>
                        </li>
                    </ul>
                </div>
                <div class="source-code">
                    <a class="toggle" href="#" data-to-raw='Показать исходники' data-to-formatted='Показать отформатированный'>Показать исходники</a>
                    <textarea>float num = random(1); // If random number is less than 0.6 if (num
                        < 0.6) { println( "Outcome A"); // Between 0.6 and 0.7 } else if (num < 0.7) { println( "Outcome B"); // Greater than 0.7 } else { println( "Outcome C"); }</textarea>
                    <div class="code-block">
                        <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="kt">float</span> <span class="n">num</span> <span class="o">=</span> <span class="n">random</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span></span>
<span class='one-line'> </span></pre></code></div>
                        <div class='code-comment-pair '>
                            <div class='code-comment '>If random number is less than 0.6</div><code><pre><span class='one-line'><span class="k">if</span> <span class="o">(</span><span class="n">num</span> <span class="o">&lt;</span> <span class="mf">0.6</span><span class="o">)</span> <span class="o">{</span></span>
<span class='one-line'>  <span class="n">println</span><span class="o">(</span><span class="s">&quot;Outcome A&quot;</span><span class="o">);</span></span></pre></code></div>
                        <div class='code-comment-pair '>
                            <div class='code-comment '>Between 0.6 and 0.7</div><code><pre><span class='one-line'><span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">num</span> <span class="o">&lt;</span> <span class="mf">0.7</span><span class="o">)</span> <span class="o">{</span></span>
<span class='one-line'>  <span class="n">println</span><span class="o">(</span><span class="s">&quot;Outcome B&quot;</span><span class="o">);</span></span></pre></code></div>
                        <div class='code-comment-pair '>
                            <div class='code-comment '>Greater than 0.7</div><code><pre><span class='one-line'><span class="o">}</span> <span class="k">else</span> <span class="o">{</span></span>
<span class='one-line'>  <span class="n">println</span><span class="o">(</span><span class="s">&quot;Outcome C&quot;</span><span class="o">);</span></span>
<span class='one-line'><span class="o">}</span></span></pre></code></div>
                    </div>
                    <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
                </div>
                <p>We could use the above methodology to create a random walker that tends to move to the right. Here is an
                    example of a <span class="klass">Walker</span> with the following probabilities:</p>
                <div class="list packed">
                    <ul>
                        <li>
                            <p><em>chance of moving up:   20%</em></p>
                        </li>
                        <li>
                            <p><em>chance of moving down:   20%</em></p>
                        </li>
                        <li>
                            <p><em>chance of moving left:   20%</em></p>
                        </li>
                        <li>
                            <p><em>chance of moving right:  40%</em></p>
                        </li>
                    </ul>
                </div>
                <div class="image-container screenshot">
                    <canvas data-processing-sources="/processingjs/intro/_I_3_RandomWalkTendsToRight/_I_3_RandomWalkTendsToRight.pde /processingjs/intro/_I_3_RandomWalkTendsToRight/Walker.pde"
                        class="screenshot">
                        <p>Ваш браузер не поддерживает canvas тег.</p>
                    </canvas>
                    <div class="sketch-controls">
                        <button class="reset">СБРОС</button>
                        <button class="pause">ПАУЗА</button>
                    </div>
                </div>
                <p>
                    <a id="intro_example3" style="display: block;"></a><span class="example">Example I.3: Walker that tends to move to the right</span></p>
                <div class="source-code">
                    <a class="toggle" href="#" data-to-raw='Показать исходники' data-to-formatted='Показать отформатированный'>Показать исходники</a>
                    <textarea> void step() { float r = random(1); //[full] A 40% chance of moving to the right! if (r
                        < 0.4) { x++; //[end] } else if (r < 0.6) { x--; } else if (r < 0.8) { y++; } else { y--; } }</textarea>
                    <div class="code-block">
                        <div class='code-comment-pair no-comment'><code><pre><span class='one-line'>  <span class="kt">void</span> <span class="nf">step</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'> </span>
<span class='one-line'>    <span class="kt">float</span> <span class="n">r</span> <span class="o">=</span> <span class="n">random</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span></span></pre></code></div>
                        <div class='code-comment-pair stretch'>
                            <div class='code-comment stretch'> A 40% chance of moving to the right!</div><code><pre><span class='one-line'>    <span class="k">if</span> <span class="o">(</span><span class="n">r</span> <span class="o">&lt;</span> <span class="mf">0.4</span><span class="o">)</span> <span class="o">{</span></span>
<span class='one-line'>      <span class="n">x</span><span class="o">++;</span></span></pre></code>
                            <div style='position:relative;clear:both;display:block;height:1px;width:100%;'></div>
                        </div>
                        <div class='code-comment-pair no-comment'><code><pre><span class='one-line'>    <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">r</span> <span class="o">&lt;</span> <span class="mf">0.6</span><span class="o">)</span> <span class="o">{</span></span>
<span class='one-line'>      <span class="n">x</span><span class="o">--;</span></span>
<span class='one-line'>    <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">r</span> <span class="o">&lt;</span> <span class="mf">0.8</span><span class="o">)</span> <span class="o">{</span></span>
<span class='one-line'>      <span class="n">y</span><span class="o">++;</span></span>
<span class='one-line'>    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span></span>
<span class='one-line'>      <span class="n">y</span><span class="o">--;</span></span>
<span class='one-line'>    <span class="o">}</span></span>
<span class='one-line'>  <span class="o">}</span></span></pre></code></div>
                    </div>
                    <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
                </div>
                <div class="example">
                    <a id="intro_exercise3" style="display: block;"></a>
                    <h4 id="exercise-i3">Exercise I.3</h4>
                    <p>Create a random walker with dynamic probabilities. For example, can you give it a 50% chance of moving
                        in the direction of the mouse?</p>
                </div>
            </section>
            <section>
                <a id="intro_section4" style="display: block;"></a>
                <h3 id="i4-a-normal-distribution-of-random-numbers">I.4 A Normal Distribution of Random Numbers</h3>
                <p>Let’s go back to that population of simulated Processing monkeys. Your program generates a thousand Monkey
                    objects, each with a height value between 200 and 300 (as this is a world of monkeys that have heights
                    between 200 and 300 pixels).</p>
                <div class="source-code">
                    <a class="toggle" href="#" data-to-raw='Показать исходники' data-to-formatted='Показать отформатированный'>Показать исходники</a>
                    <textarea>float h = random(200,300);</textarea>
                    <div class="code-block">
                        <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="kt">float</span> <span class="n">h</span> <span class="o">=</span> <span class="n">random</span><span class="o">(</span><span class="mi">200</span><span class="o">,</span><span class="mi">300</span><span class="o">);</span></span></pre></code></div>
                    </div>
                    <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
                </div>
                <p>
                    <a id="distributions-normal-81f244c0-253f-0130-ba2f-7cd1c3f718ad" style="display: block;"></a>
                    <a id="probabilitynormal-distributions-81f25400-253f-0130-ba30-7cd1c3f718ad" style="display: block;"></a>
                </p>
                <p>Does this accurately depict the heights of real-world beings? Think of a crowded sidewalk in New York City.
                    Pick any person off the street and it may appear that their height is random. Nevertheless, it’s not
                    the kind of random that <span class="function">random()</span> produces. People’s heights are not uniformly
                    distributed; there are a great deal more people of average height than there are very tall or very short
                    ones. To simulate nature, we may want it to be more likely that our monkeys are of average height (250
                    pixels), yet still allow them to be, on occasion, very short or very tall.</p>
                <p>
                    <a id="bell-curve-81f27040-253f-0130-ba31-7cd1c3f718ad" style="display: block;"></a>
                    <a id="bell-curvemean-and-81f284e0-253f-0130-ba32-7cd1c3f718ad" style="display: block;"></a>
                    <a id="gauss-carl-friedrich-81f29bd0-253f-0130-ba33-7cd1c3f718ad" style="display: block;"></a>
                    <a id="gaussian-distribution-81f2aa40-253f-0130-ba34-7cd1c3f718ad" style="display: block;"></a>
                    <a id="laplace-pierre-simon-81f2bb30-253f-0130-ba35-7cd1c3f718ad" style="display: block;"></a>
                    <a id="laplacian-distribution-81f2caa0-253f-0130-ba36-7cd1c3f718ad" style="display: block;"></a>
                    <a id="mean-81f2d7b0-253f-0130-ba37-7cd1c3f718ad" style="display: block;"></a>
                    <a id="normal-distribution-81f2e510-253f-0130-ba38-7cd1c3f718ad" style="display: block;"></a>
                    <a id="probabilitymean-81f2f3c0-253f-0130-ba39-7cd1c3f718ad" style="display: block;"></a>
                </p>
                <p>A distribution of values that cluster around an average (referred to as the “mean”) is known as a “normal”
                    distribution. It is also called the Gaussian distribution (named for mathematician Carl Friedrich Gauss)
                    or, if you are French, the Laplacian distribution (named for Pierre-Simon Laplace). Both mathematicians
                    were working concurrently in the early nineteenth century on defining such a distribution.</p>
                <p>When you graph the distribution, you get something that looks like the following, informally known as a bell
                    curve:</p>
                <a id="intro_figure2" style="display: block;"></a>
                <div class="image-container two-col">
                    <img src="/imgs/intro/intro_02.png" alt="Nature of Code Image" />
                    <p class="caption">Figure I.2</p>
                </div>
                <a id="intro_figure3" style="display: block;"></a>
                <div class="image-container two-col">
                    <img src="/imgs/intro/intro_03.png" alt="Nature of Code Image" />
                    <p class="caption">Figure I.3</p>
                </div>
                <p>
                    <a id="mu--81f31e50-253f-0130-ba3a-7cd1c3f718ad" style="display: block;"></a>
                    <a id="sigma--81f33140-253f-0130-ba3b-7cd1c3f718ad" style="display: block;"></a>
                    <a id="probabilitystandard-deviation-81f34120-253f-0130-ba3c-7cd1c3f718ad" style="display: block;"></a>
                    <a id="standard-deviation-81f354c0-253f-0130-ba3d-7cd1c3f718ad" style="display: block;"></a>
                </p>
                <p>The curve is generated by a mathematical function that defines the probability of any given value occurring
                    as a function of the mean (often written as μ, the Greek letter <em>mu</em>) and standard deviation (σ,
                    the Greek letter <em>sigma</em>).</p>
                <p>The mean is pretty easy to understand. In the case of our height values between 200 and 300, you probably
                    have an intuitive sense of the mean (i.e. average) as 250. However, what if I were to say that the standard
                    deviation is 3 or 15? What does this mean for the numbers? The graphs above should give us a hint. The
                    graph on the left shows us the distribution with a very low standard deviation, where the majority of
                    the values cluster closely around the mean. The graph on the right shows us a higher standard deviation,
                    where the values are more evenly spread out from the average.</p>
                <p>The numbers work out as follows: Given a population, 68% of the members of that population will have values
                    in the range of one standard deviation from the mean, 98% within two standard deviations, and 99.7% within
                    three standard deviations. Given a standard deviation of 5 pixels, only 0.3% of the monkey heights will
                    be less than 235 pixels (three standard deviations below the mean of 250) or greater than 265 pixels
                    (three standard deviations above the mean of 250).</p>
                <div class="note">
                    <h4 id="calculating-mean-and-standard-deviation">Calculating Mean and Standard Deviation</h4>
                    <p>Consider a class of ten students who receive the following scores (out of 100) on a test:</p>
                    <p><em>85, 82, 88, 86, 85, 93, 98, 40, 73, 83</em></p>
                    <p><strong><em>The mean is the average:  81.3</em></strong></p>
                    <p>
                        <a id="standard-deviationcalculating-81f3a130-253f-0130-ba3e-7cd1c3f718ad" style="display: block;"></a>
                        <a id="standard-deviationvariance-81f3b510-253f-0130-ba3f-7cd1c3f718ad" style="display: block;"></a>
                        <a id="variance-81f3c770-253f-0130-ba40-7cd1c3f718ad" style="display: block;"></a>
                    </p>
                    <p>The standard deviation is calculated as the square root of the average of the squares of deviations around
                        the mean. In other words, take the difference from the mean for each person and square it (variance).
                        Calculate the average of all these values and take the square root as the standard deviation.</p>
                    <div class="table">
                        <table>
                            <thead>
                                <tr>
                                    <th>Score </th>
                                    <th>Difference from Mean </th>
                                    <th>Variance</th>
                                </tr>
                            </thead>
                            <tfoot>
                                <tr>
                                    <th>
                                        <p></p>
                                    </th>
                                    <th>
                                        <p><strong>Average Variance:</strong></p>
                                    </th>
                                    <th>
                                        <p>254.23</p>
                                    </th>
                                </tr>
                            </tfoot>
                            <tbody>
                                <tr>
                                    <td>
                                        <p>85</p>
                                    </td>
                                    <td>
                                        <p>85-81.3 = 3.7</p>
                                    </td>
                                    <td>
                                        <p>(3.7)<sup>2</sup> = 13.69</p>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <p>40</p>
                                    </td>
                                    <td>
                                        <p>40-81.3 = -41.3</p>
                                    </td>
                                    <td>
                                        <p>(-41.3)<sup>2</sup> = 1705.69</p>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <p>etc.</p>
                                    </td>
                                    <td>
                                        <p></p>
                                    </td>
                                    <td>
                                        <p></p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <p><strong><em>The standard deviation is the square root of the average variance:  15.13</em></strong></p>
                </div>
                <p>
                    <a id="processingrandom-class-81f43bf0-253f-0130-ba41-7cd1c3f718ad" style="display: block;"></a>
                    <a id="random-class-processing-81f456b0-253f-0130-ba42-7cd1c3f718ad" style="display: block;"></a>
                </p>
                <p>Luckily for us, to use a normal distribution of random numbers in a Processing sketch, we don’t have to do
                    any of these calculations ourselves. Instead, we can make use of a class known as <span class="klass">Random</span>,
                    which we get for free as part of the default Java libraries imported into Processing (see <a href="http://docs.oracle.com/javase/6/docs/api/java/util/Random.html">the JavaDocs</a>                    for more information).</p>
                <p>To use the <span class="klass">Random</span> class, we must first declare a variable of type <span class="klass">Random</span>                    and create the <span class="klass">Random</span> object in <span class="function">setup()</span>.</p>
                <div class="source-code">
                    <a class="toggle" href="#" data-to-raw='Показать исходники' data-to-formatted='Показать отформатированный'>Показать исходники</a>
                    <textarea>// We use the variable name “generator” because what we // have here can be thought of as a random number generator. Random generator; void setup() { size(640,360); generator = new Random(); }
                    </textarea>
                    <div class="code-block">
                        <div class='code-comment-pair '>
                            <div class='code-comment '>We use the variable name “generator” because what we have here can be thought of as a random
                                number generator.</div><code><pre><span class='one-line'><span class="n">Random</span> <span class="n">generator</span><span class="o">;</span></span>
<span class='one-line'> </span>
<span class='one-line'><span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'>  <span class="n">size</span><span class="o">(</span><span class="mi">640</span><span class="o">,</span><span class="mi">360</span><span class="o">);</span></span>
<span class='one-line'>  <span class="n">generator</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Random</span><span class="o">();</span></span>
<span class='one-line'><span class="o">}</span></span></pre></code></div>
                    </div>
                    <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
                </div>
                <p>
                    <a id="nextgaussian-function-random-class-81f4a500-253f-0130-ba43-7cd1c3f718ad" style="display: block;"></a>
                    <a id="random-class-processingnextgaussian-function-81f4b610-253f-0130-ba44-7cd1c3f718ad" style="display: block;"></a>
                </p>
                <p>If we want to produce a random number with a normal (or Gaussian) distribution each time we run through
                    <span
                        class="function">draw()</span>, it’s as easy as calling the function <span class="function">nextGaussian()</span>.</p>
                <div class="source-code">
                    <a class="toggle" href="#" data-to-raw='Показать исходники' data-to-formatted='Показать отформатированный'>Показать исходники</a>
                    <textarea>void draw() { // Asking for a Gaussian random number. (Note nextGaussian() returns a double and must be converted to float.) float num = (float) generator.nextGaussian(); }
                    </textarea>
                    <div class="code-block">
                        <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="kt">void</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span></span></pre></code></div>
                        <div class='code-comment-pair '>
                            <div class='code-comment '>Asking for a Gaussian random number. (Note nextGaussian() returns a double and must be converted
                                to float.)</div><code><pre><span class='one-line'>  <span class="kt">float</span> <span class="n">num</span> <span class="o">=</span> <span class="o">(</span><span class="kt">float</span><span class="o">)</span> <span class="n">generator</span><span class="o">.</span><span class="na">nextGaussian</span><span class="o">();</span></span>
<span class='one-line'><span class="o">}</span></span></pre></code></div>
                    </div>
                    <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
                </div>
                <p>Here’s the thing. What are we supposed to do with this value? What if we wanted to use it, for example, to
                    assign the x-position of a shape we draw on screen?</p>
                <p>
                    <a id="nextgaussian-function-random-classdefault-meanstandard-deviation-settings-of-81f4e440-253f-0130-ba45-7cd1c3f718ad"
                        style="display: block;"></a>
                </p>
                <p>The <span class="function">nextGaussian()</span> function returns a normal distribution of random numbers
                    with the following parameters: <em>a mean of zero</em> and <em>a standard deviation of one</em>. Let’s
                    say we want a mean of 320 (the center horizontal pixel in a window of width 640) and a standard deviation
                    of 60 pixels. We can adjust the value to our parameters by multiplying it by the standard deviation and
                    adding the mean.</p>
                <div class="image-container screenshot">
                    <canvas data-processing-sources="/processingjs/intro/_I_4_Gaussian/_I_4_Gaussian.pde" class="screenshot">
                        <p>Ваш браузер не поддерживает canvas тег.</p>
                    </canvas>
                    <div class="sketch-controls">
                        <button class="reset">СБРОС</button>
                        <button class="pause">ПАУЗА</button>
                    </div>
                </div>
                <p>
                    <a id="intro_example4" style="display: block;"></a><span class="example">Example I.4: Gaussian distribution</span></p>
                <div class="source-code">
                    <a class="toggle" href="#" data-to-raw='Показать исходники' data-to-formatted='Показать отформатированный'>Показать исходники</a>
                    <textarea>void draw() { // Note that nextGaussian() returns a double. float num = (float) generator.nextGaussian(); float sd = 60; float mean = 320; // Multiply by the standard deviation and add the mean. float x = sd * num + mean; noStroke(); fill(255,10); ellipse(x,180,16,16); }
                    </textarea>
                    <div class="code-block">
                        <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="kt">void</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span></span></pre></code></div>
                        <div class='code-comment-pair '>
                            <div class='code-comment '>Note that nextGaussian() returns a double.</div><code><pre><span class='one-line'>  <span class="kt">float</span> <span class="n">num</span> <span class="o">=</span> <span class="o">(</span><span class="kt">float</span><span class="o">)</span> <span class="n">generator</span><span class="o">.</span><span class="na">nextGaussian</span><span class="o">();</span></span>
<span class='one-line'>  <span class="kt">float</span> <span class="n">sd</span> <span class="o">=</span> <span class="mi">60</span><span class="o">;</span></span>
<span class='one-line'>  <span class="kt">float</span> <span class="n">mean</span> <span class="o">=</span> <span class="mi">320</span><span class="o">;</span></span>
<span class='one-line'> </span></pre></code></div>
                        <div class='code-comment-pair '>
                            <div class='code-comment '>Multiply by the standard deviation and add the mean.</div><code><pre><span class='one-line'>  <span class="kt">float</span> <span class="n">x</span> <span class="o">=</span> <span class="n">sd</span> <span class="o">*</span> <span class="n">num</span> <span class="o">+</span> <span class="n">mean</span><span class="o">;</span></span>
<span class='one-line'> </span>
<span class='one-line'>  <span class="n">noStroke</span><span class="o">();</span></span>
<span class='one-line'>  <span class="n">fill</span><span class="o">(</span><span class="mi">255</span><span class="o">,</span><span class="mi">10</span><span class="o">);</span></span>
<span class='one-line'>  <span class="n">ellipse</span><span class="o">(</span><span class="n">x</span><span class="o">,</span><span class="mi">180</span><span class="o">,</span><span class="mi">16</span><span class="o">,</span><span class="mi">16</span><span class="o">);</span></span>
<span class='one-line'><span class="o">}</span></span></pre></code></div>
                    </div>
                    <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
                </div>
                <p>By drawing the ellipses on top of each other with some transparency, we can actually see the distribution.
                    The brightest spot is near the center, where most of the values cluster, but every so often circles are
                    drawn farther to the right or left of the center.</p>
                <div class="example">
                    <a id="intro_exercise4" style="display: block;"></a>
                    <h4 id="exercise-i4">Exercise I.4</h4>
                    <p>Consider a simulation of paint splatter drawn as a collection of colored dots. Most of the paint clusters
                        around a central location, but some dots do splatter out towards the edges. Can you use a normal
                        distribution of random numbers to generate the locations of the dots? Can you also use a normal distribution
                        of random numbers to generate a color palette?</p>
                </div>
                <p>
                    <a id="random-walksgaussian-81f673c0-253f-0130-ba46-7cd1c3f718ad" style="display: block;"></a>
                </p>
                <div class="example">
                    <a id="intro_exercise5" style="display: block;"></a>
                    <h4 id="exercise-i5">Exercise I.5</h4>
                    <p>A Gaussian random walk is defined as one in which the step size (how far the object moves in a given
                        direction) is generated with a normal distribution. Implement this variation of our random walk.</p>
                </div>
            </section>
            <section>
                <a id="intro_section5" style="display: block;"></a>
                <h3 id="i5-a-custom-distribution-of-random-numbers">I.5 A Custom Distribution of Random Numbers</h3>
                <p>
                    <a id="distributions-custom-81f69940-253f-0130-ba47-7cd1c3f718ad" style="display: block;"></a>
                    <a id="lvy-flight-81f6a7f0-253f-0130-ba48-7cd1c3f718ad" style="display: block;"></a>
                    <a id="non-uniform-distributionscustom-81f6ba40-253f-0130-ba49-7cd1c3f718ad" style="display: block;"></a>
                    <a id="distributions-non-uniformcustom-81f6d3b0-253f-0130-ba4a-7cd1c3f718ad" style="display: block;"></a>
                    <a id="oversampling-81f6e690-253f-0130-ba4b-7cd1c3f718ad" style="display: block;"></a>
                    <a id="random-number-generatorscustom-distributions-creating-81f6fa00-253f-0130-ba4c-7cd1c3f718ad" style="display: block;"></a>
                    <a id="random-walkslvy-flight-81f70ec0-253f-0130-ba4d-7cd1c3f718ad" style="display: block;"></a>
                    <a id="random-walksoversampling-81f72650-253f-0130-ba4e-7cd1c3f718ad" style="display: block;"></a>
                </p>
                <p>There will come a time in your life when you do not want a uniform distribution of random values, or a Gaussian
                    one. Let’s imagine for a moment that you are a random walker in search of food. Moving randomly around
                    a space seems like a reasonable strategy for finding something to eat. After all, you don’t know where
                    the food is, so you might as well search randomly until you find it. The problem, as you may have noticed,
                    is that random walkers return to previously visited locations many times (this is known as “oversampling”).
                    One strategy to avoid such a problem is to, every so often, take a very large step. This allows the walker
                    to forage randomly around a specific location while periodically jumping very far away to reduce the
                    amount of oversampling. This variation on the random walk (known as a Lévy flight) requires a custom
                    set of probabilities. Though not an exact implementation of a Lévy flight, we could state the probability
                    distribution as follows: the longer the step, the less likely it is to be picked; the shorter the step,
                    the more likely.</p>
                <p>Earlier in this prologue, we saw that we could generate custom probability distributions by filling an array
                    with values (some duplicated so that they would be picked more frequently) or by testing the result of
                    <span class="function">random()</span>. We could implement a Lévy flight by saying that there is a 1%
                    chance of the walker taking a large step.</p>
                <p>
                    <a id="arrayslvy-flights-implementing-with-81f74ef0-253f-0130-ba4f-7cd1c3f718ad" style="display: block;"></a>
                    <a id="lvy-flightimplementing-with-arrays-81f76300-253f-0130-ba50-7cd1c3f718ad" style="display: block;"></a>
                </p>
                <div class="source-code">
                    <a class="toggle" href="#" data-to-raw='Показать исходники' data-to-formatted='Показать отформатированный'>Показать исходники</a>
                    <textarea>float r = random(1); //[full] A 1% chance of taking a large step if (r
                        < 0.01) { xstep=r andom(-100,100); ystep=r andom(-100,100); //[end] } else { xstep=r andom(-1,1); ystep=r andom(-1,1); }</textarea>
                    <div class="code-block">
                        <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="kt">float</span> <span class="n">r</span> <span class="o">=</span> <span class="n">random</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span></span></pre></code></div>
                        <div class='code-comment-pair stretch'>
                            <div class='code-comment stretch'> A 1% chance of taking a large step</div><code><pre><span class='one-line'><span class="k">if</span> <span class="o">(</span><span class="n">r</span> <span class="o">&lt;</span> <span class="mf">0.01</span><span class="o">)</span> <span class="o">{</span></span>
<span class='one-line'>  <span class="n">xstep</span> <span class="o">=</span> <span class="n">random</span><span class="o">(-</span><span class="mi">100</span><span class="o">,</span><span class="mi">100</span><span class="o">);</span></span>
<span class='one-line'>  <span class="n">ystep</span> <span class="o">=</span> <span class="n">random</span><span class="o">(-</span><span class="mi">100</span><span class="o">,</span><span class="mi">100</span><span class="o">);</span></span></pre></code>
                            <div style='position:relative;clear:both;display:block;height:1px;width:100%;'></div>
                        </div>
                        <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="o">}</span> <span class="k">else</span> <span class="o">{</span></span>
<span class='one-line'>  <span class="n">xstep</span> <span class="o">=</span> <span class="n">random</span><span class="o">(-</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">);</span></span>
<span class='one-line'>  <span class="n">ystep</span> <span class="o">=</span> <span class="n">random</span><span class="o">(-</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">);</span></span>
<span class='one-line'><span class="o">}</span></span></pre></code></div>
                    </div>
                    <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
                </div>
                <p>
                    <a id="lvy-flightimplementing-with-qualifying-random-values-81f77ac0-253f-0130-ba51-7cd1c3f718ad" style="display: block;"></a>
                </p>
                <p>However, this reduces the probabilities to a fixed number of options. What if we wanted to make a more general
                    rule—the higher a number, the more likely it is to be picked? 3.145 would be more likely to be picked
                    than 3.144, even if that likelihood is just a tiny bit greater. In other words, if <span class="var">x</span>                    is the random number, we could map the likelihood on the y-axis with <span class="var">y</span> =
                    <span
                        class="var">x</span>.</p>
                <a id="intro_figure4" style="display: block;"></a>
                <div class="image-container ">
                    <img src="/imgs/intro/intro_04.png" alt="Nature of Code Image" />
                    <p class="caption">Figure I.4</p>
                </div>
                <p>If we can figure out how to generate a distribution of random numbers according to the above graph, then
                    we will be able to apply the same methodology to any curve for which we have a formula.</p>
                <p>
                    <a id="non-uniform-distributionsqualifying-random-values-81f7b200-253f-0130-ba52-7cd1c3f718ad" style="display: block;"></a>
                    <a id="distributions-non-uniformqualifying-random-values-81f7c780-253f-0130-ba53-7cd1c3f718ad" style="display: block;"></a>
                    <a id="qualifying-random-values-81f7d900-253f-0130-ba54-7cd1c3f718ad" style="display: block;"></a>
                </p>
                <p>One solution is to pick two random numbers instead of one. The first random number is just that, a random
                    number. The second one, however, is what we’ll call a “qualifying random value.” It will tell us whether
                    to use the first one or throw it away and pick another one. Numbers that have an easier time qualifying
                    will be picked more often, and numbers that rarely qualify will be picked infrequently. Here are the
                    steps (for now, let’s consider only random values between 0 and 1):</p>
                <div style="page-break-after:always;"> </div>
                <div class="list">
                    <ol class="arabic">
                        <li>
                            <p>
                                Pick a random number: R1
                            </p>
                        </li>
                        <li>
                            <p>
                                Compute a probability P that R1 should qualify. Let’s try: P = R1.
                            </p>
                        </li>
                        <li>
                            <p>
                                Pick another random number: R2
                            </p>
                        </li>
                        <li>
                            <p>
                                If R2 is less than P, then we have found our number—R1!
                            </p>
                        </li>
                        <li>
                            <p>
                                If R2 is not less than P, go back to step 1 and start over.
                            </p>
                        </li>
                    </ol>
                </div>
                <p>Here we are saying that the likelihood that a random value will qualify is equal to the random number itself.
                    Let’s say we pick 0.1 for R1. This means that R1 will have a 10% chance of qualifying. If we pick 0.83
                    for R1 then it will have a 83% chance of qualifying. The higher the number, the greater the likelihood
                    that we will actually use it.</p>
                <p>
                    <a id="monte-carlo-method-81f80ed0-253f-0130-ba55-7cd1c3f718ad" style="display: block;"></a>
                    <a id="non-uniform-distributionsmonte-carlo-method-81f820c0-253f-0130-ba56-7cd1c3f718ad" style="display: block;"></a>
                    <a id="distributions-non-uniformmonte-carlo-method-81f83440-253f-0130-ba57-7cd1c3f718ad" style="display: block;"></a>
                    <a id="qualifying-random-valuesmonte-carlo-method-81f84700-253f-0130-ba58-7cd1c3f718ad" style="display: block;"></a>
                </p>
                <p>Here is a function (named for the Monte Carlo method, which was named for the Monte Carlo casino) that implements
                    the above algorithm, returning a random value between 0 and 1.</p>
                <div class="source-code">
                    <a class="toggle" href="#" data-to-raw='Показать исходники' data-to-formatted='Показать отформатированный'>Показать исходники</a>
                    <textarea>float montecarlo() { // We do this “forever” until we find a qualifying random value. while (true) { // Pick a random value. float r1 = random(1); // Assign a probability. float probability = r1; // Pick a second random value. float r2 = random(1); //[full] Does it qualify? If so, we’re done! if (r2
                        < probability) { return r1; } //[end] } }</textarea>
                    <div class="code-block">
                        <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="kt">float</span> <span class="nf">montecarlo</span><span class="o">()</span> <span class="o">{</span></span></pre></code></div>
                        <div class='code-comment-pair '>
                            <div class='code-comment '>We do this “forever” until we find a qualifying random value.</div><code><pre><span class='one-line'>  <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span></span></pre></code></div>
                        <div class='code-comment-pair '>
                            <div class='code-comment '>Pick a random value.</div><code><pre><span class='one-line'>    <span class="kt">float</span> <span class="n">r1</span> <span class="o">=</span> <span class="n">random</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span></span></pre></code></div>
                        <div class='code-comment-pair '>
                            <div class='code-comment '>Assign a probability.</div><code><pre><span class='one-line'>    <span class="kt">float</span> <span class="n">probability</span> <span class="o">=</span> <span class="n">r1</span><span class="o">;</span></span></pre></code></div>
                        <div class='code-comment-pair '>
                            <div class='code-comment '>Pick a second random value.</div><code><pre><span class='one-line'>    <span class="kt">float</span> <span class="n">r2</span> <span class="o">=</span> <span class="n">random</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span></span>
<span class='one-line'> </span></pre></code></div>
                        <div class='code-comment-pair stretch'>
                            <div class='code-comment stretch'> Does it qualify? If so, we’re done!</div><code><pre><span class='one-line'>    <span class="k">if</span> <span class="o">(</span><span class="n">r2</span> <span class="o">&lt;</span> <span class="n">probability</span><span class="o">)</span> <span class="o">{</span></span>
<span class='one-line'>      <span class="k">return</span> <span class="n">r1</span><span class="o">;</span></span>
<span class='one-line'>    <span class="o">}</span></span></pre></code>
                            <div style='position:relative;clear:both;display:block;height:1px;width:100%;'></div>
                        </div>
                        <div class='code-comment-pair no-comment'><code><pre><span class='one-line'>  <span class="o">}</span></span>
<span class='one-line'><span class="o">}</span></span></pre></code></div>
                    </div>
                    <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
                </div>
                <div class="example">
                    <a id="intro_exercise6" style="display: block;"></a>
                    <h4 id="exercise-i6">Exercise I.6</h4>
                    <p>Use a custom probability distribution to vary the size of a step taken by the random walker. The step
                        size can be determined by influencing the range of values picked. Can you map the probability exponentially—i.e.
                        making the likelihood that a value is picked equal to the value squared?</p>
                    <div class="source-code">
                        <a class="toggle" href="#" data-to-raw='Показать исходники' data-to-formatted='Показать отформатированный'>Показать исходники</a>
                        <textarea> // A uniform distribution of step sizes. Change this! float stepsize = random(0,10); float stepx = random(-stepsize,stepsize); float stepy = random(-stepsize,stepsize); x += stepx; y += stepy;</textarea>
                        <div class="code-block">
                            <div class='code-comment-pair '>
                                <div class='code-comment '>A uniform distribution of step sizes. Change this!</div><code><pre><span class='one-line'>  <span class="kt">float</span> <span class="n">stepsize</span> <span class="o">=</span> <span class="n">random</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">10</span><span class="o">);</span></span>
<span class='one-line'> </span>
<span class='one-line'>  <span class="kt">float</span> <span class="n">stepx</span> <span class="o">=</span> <span class="n">random</span><span class="o">(-</span><span class="n">stepsize</span><span class="o">,</span><span class="n">stepsize</span><span class="o">);</span></span>
<span class='one-line'>  <span class="kt">float</span> <span class="n">stepy</span> <span class="o">=</span> <span class="n">random</span><span class="o">(-</span><span class="n">stepsize</span><span class="o">,</span><span class="n">stepsize</span><span class="o">);</span></span>
<span class='one-line'> </span>
<span class='one-line'>  <span class="n">x</span> <span class="o">+=</span> <span class="n">stepx</span><span class="o">;</span></span>
<span class='one-line'>  <span class="n">y</span> <span class="o">+=</span> <span class="n">stepy</span><span class="o">;</span></span></pre></code></div>
                        </div>
                        <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
                    </div>
                    <p>(Later we’ll see how to do this more efficiently using vectors.)</p>
                </div>
            </section>
            <section>
                <a id="intro_section6" style="display: block;"></a>
                <h3 id="i6-perlin-noise-a-smoother-approach">I.6 Perlin Noise (A Smoother Approach)</h3>
                <p>
                    <a id="natural-phenomenaperlin-noise-and-81f871c0-253f-0130-ba59-7cd1c3f718ad" style="display: block;"></a>
                    <a id="non-uniform-distributionsperlin-noise-81f88510-253f-0130-ba5a-7cd1c3f718ad" style="display: block;"></a>
                    <a id="distributions-non-uniformperlin-noise-81f89710-253f-0130-ba5b-7cd1c3f718ad" style="display: block;"></a>
                    <a id="perlin-noisenatural-phenomena-modeling-with-81f8ac60-253f-0130-ba5c-7cd1c3f718ad" style="display: block;"></a>
                    <a id="tron-1982-81f8bef0-253f-0130-ba5d-7cd1c3f718ad" style="display: block;"></a>
                </p>
                <p>A good random number generator produces numbers that have no relationship and show no discernible pattern.
                    As we are beginning to see, a little bit of randomness can be a good thing when programming organic,
                    lifelike behaviors. However, randomness as the single guiding principle is not necessarily natural. An
                    algorithm known as “Perlin noise,” named for its inventor Ken Perlin, takes this concept into account.
                    Perlin developed the noise function while working on the original <em>Tron</em> movie in the early 1980s;
                    it was designed to create procedural textures for computer-generated effects. In 1997 Perlin won an Academy
                    Award in technical achievement for this work. Perlin noise can be used to generate various effects with
                    natural qualities, such as clouds, landscapes, and patterned textures like marble.</p>
                <p>
                    <a id="naturally-ordered-sequence-of-numbers-81f8e600-253f-0130-ba5e-7cd1c3f718ad" style="display: block;"></a>
                    <a id="pseudo-random-numbersperlin-noise-and-81f8f6b0-253f-0130-ba5f-7cd1c3f718ad" style="display: block;"></a>
                </p>
                <p>Perlin noise has a more organic appearance because it produces a naturally ordered (“smooth”) sequence of
                    pseudo-random numbers. The graph on the left below shows Perlin noise over time, with the x-axis representing
                    time; note the smoothness of the curve. The graph on the right shows pure random numbers over time. (The
                    code for generating these graphs is available in the accompanying book downloads.)</p>
                <div class="image-container two-col">
                    <img src="/imgs/intro/intro_05.png" alt="Nature of Code Image" />
                    <p class="caption">Figure I.5: Noise</p>
                </div>
                <div class="image-container two-col">
                    <img src="/imgs/intro/intro_06.png" alt="Nature of Code Image" />
                    <p class="caption">Figure I.6: Random</p>
                </div>
                <p>
                    <a id="noise-function-processing-81f920d0-253f-0130-ba60-7cd1c3f718ad" style="display: block;"></a>
                    <a id="perlin-noisenoise-function-processing-81f93270-253f-0130-ba61-7cd1c3f718ad" style="display: block;"></a>
                    <a id="processingnoise-function-81f94ad0-253f-0130-ba62-7cd1c3f718ad" style="display: block;"></a>
                </p>
                <p>Processing has a built-in implementation of the Perlin noise algorithm: the function <span class="function">noise()</span>.
                    The <span class="function">noise()</span> function takes one, two, or three arguments, as noise is computed
                    in one, two, or three dimensions. Let’s start by looking at one-dimensional noise.</p>
                <p>
                    <a id="noisedetail-function-processing-81f98750-253f-0130-ba63-7cd1c3f718ad" style="display: block;"></a>
                    <a id="processingnoisedetail-function-81f9a900-253f-0130-ba64-7cd1c3f718ad" style="display: block;"></a>
                </p>
                <div class="note">
                    <h3 id="noise-detail">Noise Detail</h3>
                    <p>The Processing <a href="http://processing.org/reference/noise_.html">noise reference</a> tells us that
                        noise is calculated over several “octaves.” Calling the <a href="http://processing.org/reference/noiseDetail_.html"><span class="function">noiseDetail()</span></a>                        function will change both the number of octaves and their importance relative to one another. This
                        in turn changes how the noise function behaves.</p>
                    <p>An online lecture by Ken Perlin lets you learn more about how noise works from <a href="http://www.noisemachine.com/talk1/">Perlin himself</a>.</p>
                </div>
                <p>Consider drawing a circle in our Processing window at a random x-location.</p>
                <div class="source-code">
                    <a class="toggle" href="#" data-to-raw='Показать исходники' data-to-formatted='Показать отформатированный'>Показать исходники</a>
                    <textarea>// A random x-location float x = random(0,width); ellipse(x,180,16,16);
                    </textarea>
                    <div class="code-block">
                        <div class='code-comment-pair '>
                            <div class='code-comment '>A random x-location</div><code><pre><span class='one-line'><span class="kt">float</span> <span class="n">x</span> <span class="o">=</span> <span class="n">random</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="n">width</span><span class="o">);</span></span>
<span class='one-line'><span class="n">ellipse</span><span class="o">(</span><span class="n">x</span><span class="o">,</span><span class="mi">180</span><span class="o">,</span><span class="mi">16</span><span class="o">,</span><span class="mi">16</span><span class="o">);</span></span></pre></code></div>
                    </div>
                    <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
                </div>
                <p>Now, instead of a random x-location, we want a Perlin noise x-location that is “smoother.” You might think
                    that all you need to do is replace <span class="function">random()</span> with <span class="function">noise()</span>,
                    i.e.</p>
                <div class="source-code">
                    <a class="toggle" href="#" data-to-raw='Показать исходники' data-to-formatted='Показать отформатированный'>Показать исходники</a>
                    <textarea>// A noise x-location? float x = noise(0,width); //[line-through]</textarea>
                    <div class="code-block">
                        <div class='code-comment-pair '>
                            <div class='code-comment '>A noise x-location?</div><code><pre><span class='one-line'><span class="line-through"><span class="kt">float</span> <span class="n">x</span> <span class="o">=</span> <span class="n">noise</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="n">width</span><span class="o">);</span></span></span></pre></code></div>
                    </div>
                    <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
                </div>
                <p>
                    <a id="noise-function-processingarguments-for-81f9f680-253f-0130-ba65-7cd1c3f718ad" style="display: block;"></a>
                </p>
                <p>While conceptually this is exactly what we want to do—calculate an x-value that ranges between 0 and the
                    width according to Perlin noise—this is not the correct implementation. While the arguments to the
                    <span
                        class="function">random()</span> function specify a range of values between a minimum and a maximum, <span class="function">noise()</span>                        does not work this way. Instead, the output range is fixed—it always returns a value between 0 and
                        1. We’ll see in a moment that we can get around this easily with Processing’s <span class="function">map()</span>                        function, but first we must examine what exactly <span class="function">noise()</span> expects us
                        to pass in as an argument.</p>
                <p>We can think of one-dimensional Perlin noise as a linear sequence of values over time. For example:</p>
                <div class="table">
                    <table>
                        <thead>
                            <tr>
                                <th>Time </th>
                                <th>Noise Value</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <p>0</p>
                                </td>
                                <td>
                                    <p>0.365</p>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <p>1</p>
                                </td>
                                <td>
                                    <p>0.363</p>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <p>2</p>
                                </td>
                                <td>
                                    <p>0.363</p>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <p>3</p>
                                </td>
                                <td>
                                    <p>0.364</p>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <p>4</p>
                                </td>
                                <td>
                                    <p>0.366</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p>Now, in order to access a particular noise value in Processing, we have to pass a specific "moment in time"
                    to the <span class="function">noise()</span> function. For example:</p>
                <div class="source-code">
                    <a class="toggle" href="#" data-to-raw='Показать исходники' data-to-formatted='Показать отформатированный'>Показать исходники</a>
                    <textarea>float n = noise(3);</textarea>
                    <div class="code-block">
                        <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="kt">float</span> <span class="n">n</span> <span class="o">=</span> <span class="n">noise</span><span class="o">(</span><span class="mi">3</span><span class="o">);</span></span></pre></code></div>
                    </div>
                    <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
                </div>
                <p>According to the above table, <span class="function">noise(3)</span> will return 0.364 at time equals 3.
                    We could improve this by using a variable for time and asking for a noise value continuously in
                    <span
                        class="function">draw()</span>.</p>
                <div class="source-code">
                    <a class="toggle" href="#" data-to-raw='Показать исходники' data-to-formatted='Показать отформатированный'>Показать исходники</a>
                    <textarea>float t = 3; void draw() { // We need the noise value for a specific moment in time. float n = noise(t); println(n); }
                    </textarea>
                    <div class="code-block">
                        <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="kt">float</span> <span class="n">t</span> <span class="o">=</span> <span class="mi">3</span><span class="o">;</span></span>
<span class='one-line'> </span>
<span class='one-line'><span class="kt">void</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span></span></pre></code></div>
                        <div class='code-comment-pair '>
                            <div class='code-comment '>We need the noise value for a specific moment in time.</div><code><pre><span class='one-line'>  <span class="kt">float</span> <span class="n">n</span> <span class="o">=</span> <span class="n">noise</span><span class="o">(</span><span class="n">t</span><span class="o">);</span></span>
<span class='one-line'>  <span class="n">println</span><span class="o">(</span><span class="n">n</span><span class="o">);</span></span>
<span class='one-line'><span class="o">}</span></span></pre></code></div>
                    </div>
                    <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
                </div>
                <p>The above code results in the same value printed over and over. This happens because we are asking for the
                    result of the <span class="function">noise()</span> function at the same point in time—3—over and over.
                    If we increment the time variable <span class="var">t</span>, however, we’ll get a different result.</p>
                <div class="source-code">
                    <a class="toggle" href="#" data-to-raw='Показать исходники' data-to-formatted='Показать отформатированный'>Показать исходники</a>
                    <textarea>// Typically we would start at time = 0, though this is arbitrary. float t = 0; void draw() { float n = noise(t); println(n); // Now, we move forward in time! t += 0.01; }
                    </textarea>
                    <div class="code-block">
                        <div class='code-comment-pair '>
                            <div class='code-comment '>Typically we would start at time = 0, though this is arbitrary.</div><code><pre><span class='one-line'><span class="kt">float</span> <span class="n">t</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span></span>
<span class='one-line'> </span>
<span class='one-line'><span class="kt">void</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'>  <span class="kt">float</span> <span class="n">n</span> <span class="o">=</span> <span class="n">noise</span><span class="o">(</span><span class="n">t</span><span class="o">);</span></span>
<span class='one-line'>  <span class="n">println</span><span class="o">(</span><span class="n">n</span><span class="o">);</span></span></pre></code></div>
                        <div class='code-comment-pair '>
                            <div class='code-comment '>Now, we move forward in time!</div><code><pre><span class='one-line'>  <span class="n">t</span> <span class="o">+=</span> <span class="mf">0.01</span><span class="o">;</span></span>
<span class='one-line'><span class="o">}</span></span></pre></code></div>
                    </div>
                    <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
                </div>
                <p>How quickly we increment <span class="var">t</span> also affects the smoothness of the noise. If we make
                    large jumps in time, then we are skipping ahead and the values will be more random.</p>
                <a id="intro_figure7" style="display: block;"></a>
                <div class="image-container ">
                    <img src="/imgs/intro/intro_07.png" alt="Nature of Code Image" />
                    <p class="caption">Figure I.7</p>
                </div>
                <p>Try running the code several times, incrementing <span class="var">t</span> by 0.01, 0.02, 0.05, 0.1, 0.0001,
                    and you will see different results.</p>
                <section>
                    <a id="_mapping_noise" style="display: block;"></a>
                    <h4 id="mapping-noise">Mapping Noise</h4>
                    <p>
                        <a id="map-function-processing-81fc0ba0-253f-0130-ba66-7cd1c3f718ad" style="display: block;"></a>
                        <a id="perlin-noisemap-function-81fc1c90-253f-0130-ba67-7cd1c3f718ad" style="display: block;"></a>
                    </p>
                    <p>Now we’re ready to answer the question of what to do with the noise value. Once we have the value with
                        a range between 0 and 1, it’s up to us to map that range to what we want. The easiest way to do this
                        is with Processing’s <span class="function">map()</span> function. The <span class="function">map()</span>                        function takes five arguments. First up is the value we want to map, in this case <span class="var">n</span>.
                        Then we have to give it the value’s current range (minimum and maximum), followed by our desired
                        range.</p>
                    <a id="intro_figure8" style="display: block;"></a>
                    <div class="image-container ">
                        <img src="/imgs/intro/intro_08.png" alt="Nature of Code Image" />
                        <p class="caption">Figure I.8</p>
                    </div>
                    <p>In this case, we know that noise has a range between 0 and 1, but we’d like to draw our circle with a
                        range between 0 and the window’s width.</p>
                    <div class="source-code">
                        <a class="toggle" href="#" data-to-raw='Показать исходники' data-to-formatted='Показать отформатированный'>Показать исходники</a>
                        <textarea>float t = 0; void draw() { float n = noise(t); // Using map() to customize the range of Perlin noise float x = map(n,0,1,0,width); ellipse(x,180,16,16); t += 0.01; }
                        </textarea>
                        <div class="code-block">
                            <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="kt">float</span> <span class="n">t</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span></span>
<span class='one-line'> </span>
<span class='one-line'><span class="kt">void</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'>  <span class="kt">float</span> <span class="n">n</span> <span class="o">=</span> <span class="n">noise</span><span class="o">(</span><span class="n">t</span><span class="o">);</span></span></pre></code></div>
                            <div class='code-comment-pair '>
                                <div class='code-comment '>Using map() to customize the range of Perlin noise</div><code><pre><span class='one-line'>  <span class="kt">float</span> <span class="n">x</span> <span class="o">=</span> <span class="n">map</span><span class="o">(</span><span class="n">n</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="n">width</span><span class="o">);</span></span>
<span class='one-line'>  <span class="n">ellipse</span><span class="o">(</span><span class="n">x</span><span class="o">,</span><span class="mi">180</span><span class="o">,</span><span class="mi">16</span><span class="o">,</span><span class="mi">16</span><span class="o">);</span></span>
<span class='one-line'> </span>
<span class='one-line'>  <span class="n">t</span> <span class="o">+=</span> <span class="mf">0.01</span><span class="o">;</span></span>
<span class='one-line'><span class="o">}</span></span></pre></code></div>
                        </div>
                        <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
                    </div>
                    <p>We can apply the exact same logic to our random walker, and assign both its x- and y-values according
                        to Perlin noise.</p>
                    <div class="image-container screenshot">
                        <canvas data-processing-sources="/processingjs/intro/_I_5_NoiseWalk/_I_5_NoiseWalk.pde /processingjs/intro/_I_5_NoiseWalk/Walker.pde"
                            class="screenshot">
                            <p>Ваш браузер не поддерживает canvas тег.</p>
                        </canvas>
                        <div class="sketch-controls">
                            <button class="reset">СБРОС</button>
                            <button class="pause">ПАУЗА</button>
                        </div>
                    </div>
                    <p>
                        <a id="intro_example5" style="display: block;"></a><span class="example">Example I.5: Perlin noise walker</span></p>
                    <div class="source-code">
                        <a class="toggle" href="#" data-to-raw='Показать исходники' data-to-formatted='Показать отформатированный'>Показать исходники</a>
                        <textarea>class Walker { float x,y; float tx,ty; Walker() { tx = 0; ty = 10000; } void step() { //[full] x- and y-location mapped from noise x = map(noise(tx), 0, 1, 0, width); y = map(noise(ty), 0, 1, 0, height); //[end] //[full] Move forward through “time.” tx += 0.01; ty += 0.01; //[end] } }
                        </textarea>
                        <div class="code-block">
                            <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="kd">class</span> <span class="nc">Walker</span> <span class="o">{</span></span>
<span class='one-line'>  <span class="kt">float</span> <span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">;</span></span>
<span class='one-line'> </span>
<span class='one-line'>  <span class="kt">float</span> <span class="n">tx</span><span class="o">,</span><span class="n">ty</span><span class="o">;</span></span>
<span class='one-line'> </span>
<span class='one-line'>  <span class="n">Walker</span><span class="o">()</span> <span class="o">{</span></span>
<span class='one-line'>    <span class="n">tx</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span></span>
<span class='one-line'>    <span class="n">ty</span> <span class="o">=</span> <span class="mi">10000</span><span class="o">;</span></span>
<span class='one-line'>  <span class="o">}</span></span>
<span class='one-line'> </span>
<span class='one-line'>  <span class="kt">void</span> <span class="nf">step</span><span class="o">()</span> <span class="o">{</span></span></pre></code></div>
                            <div class='code-comment-pair stretch'>
                                <div class='code-comment stretch'> x- and y-location mapped from noise</div><code><pre><span class='one-line'>    <span class="n">x</span> <span class="o">=</span> <span class="n">map</span><span class="o">(</span><span class="n">noise</span><span class="o">(</span><span class="n">tx</span><span class="o">),</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">width</span><span class="o">);</span></span>
<span class='one-line'>    <span class="n">y</span> <span class="o">=</span> <span class="n">map</span><span class="o">(</span><span class="n">noise</span><span class="o">(</span><span class="n">ty</span><span class="o">),</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">height</span><span class="o">);</span></span></pre></code>
                                <div style='position:relative;clear:both;display:block;height:1px;width:100%;'></div>
                            </div>
                            <div class='code-comment-pair no-comment'><code><pre><span class='one-line'> </span></pre></code></div>
                            <div class='code-comment-pair stretch'>
                                <div class='code-comment stretch'> Move forward through “time.”</div><code><pre><span class='one-line'>    <span class="n">tx</span> <span class="o">+=</span> <span class="mf">0.01</span><span class="o">;</span></span>
<span class='one-line'>    <span class="n">ty</span> <span class="o">+=</span> <span class="mf">0.01</span><span class="o">;</span></span></pre></code>
                                <div style='position:relative;clear:both;display:block;height:1px;width:100%;'></div>
                            </div>
                            <div class='code-comment-pair no-comment'><code><pre><span class='one-line'>  <span class="o">}</span></span>
<span class='one-line'><span class="o">}</span></span></pre></code></div>
                        </div>
                        <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
                    </div>
                    <p>Notice how the above example requires an additional pair of variables: <span class="var">tx</span> and
                        <span class="var">ty</span>. This is because we need to keep track of two time variables, one for
                        the x-location of the <span class="klass">Walker</span> object and one for the y-location. But there
                        is something a bit odd about these variables. Why does <span class="var">tx</span> start at 0 and
                        <span class="var">ty</span> at 10,000? While these numbers are arbitrary choices, we have very specifically
                        initialized our two time variables with different values. This is because the noise function is deterministic:
                        it gives you the same result for a specific time <span class="var">t</span> each and every time.
                        If we asked for the noise value at the same time <span class="var">t</span> for both <span class="var">x</span>                        and <span class="var">y</span>, then <span class="var">x</span> and <span class="var">y</span> would
                        always be equal, meaning that the <span class="klass">Walker</span> object would only move along
                        a diagonal. Instead, we simply use two different parts of the noise space, starting at 0 for
                        <span
                            class="var">x</span> and 10,000 for <span class="var">y</span> so that <span class="var">x</span> and <span class="var">y</span>                            can appear to act independently of each other.</p>
                    <a id="intro_figure9" style="display: block;"></a>
                    <div class="image-container ">
                        <img src="/imgs/intro/intro_09.png" alt="Nature of Code Image" />
                        <p class="caption">Figure I.9</p>
                    </div>
                    <p>In truth, there is no actual concept of time at play here. It’s a useful metaphor to help us understand
                        how the noise function works, but really what we have is space, rather than time. The graph above
                        depicts a linear sequence of noise values in a one-dimensional space, and we can ask for a value
                        at a specific x-location whenever we want. In examples, you will often see a variable named
                        <span
                            class="var">xoff</span> to indicate the x-offset along the noise graph, rather than <span class="var">t</span>                            for time (as noted in the diagram).</p>
                    <div class="example">
                        <a id="intro_exercise7" style="display: block;"></a>
                        <h5 id="exercise-i7">Exercise I.7</h5>
                        <p>In the above random walker, the result of the noise function is mapped directly to the <span class="klass">Walker</span>’s
                            location. Create a random walker where you instead map the result of the <span class="function">noise()</span>                            function to a <span class="klass">Walker</span>’s step size.</p>
                    </div>
                </section>
                <section>
                    <a id="_two_dimensional_noise" style="display: block;"></a>
                    <h4 id="two-dimensional-noise">Two-Dimensional Noise</h4>
                    <p>
                        <a id="perlin-noisetwo-dimensional-81fd3a00-253f-0130-ba68-7cd1c3f718ad" style="display: block;"></a>
                    </p>
                    <p>This idea of noise values living in a one-dimensional space is important because it leads us right into
                        a discussion of two-dimensional space. Let’s think about this for a moment. With one-dimensional
                        noise, we have a sequence of values in which any given value is similar to its neighbor. Because
                        the value is in one dimension, it only has two neighbors: a value that comes before it (to the left
                        on the graph) and one that comes after it (to the right).</p>
                    <a id="intro_figure10" style="display: block;"></a>
                    <div class="image-container two-col-borderless">
                        <img src="/imgs/intro/intro_10.png" alt="Nature of Code Image" />
                        <p class="caption">Figure I.10: 1D Noise</p>
                    </div>
                    <a id="intro_figure11" style="display: block;"></a>
                    <div class="image-container two-col-borderless">
                        <img src="/imgs/intro/intro_11.png" alt="Nature of Code Image" />
                        <p class="caption">Figure I.11: 2D Noise</p>
                    </div>
                    <p>Two-dimensional noise works exactly the same way conceptually. The difference of course is that we aren’t
                        looking at values along a linear path, but values that are sitting on a grid. Think of a piece of
                        graph paper with numbers written into each cell. A given value will be similar to all of its neighbors:
                        above, below, to the right, to the left, and along any diagonal.</p>
                    <p>If you were to visualize this graph paper with each value mapped to the brightness of a color, you would
                        get something that looks like clouds. White sits next to light gray, which sits next to gray, which
                        sits next to dark gray, which sits next to black, which sits next to dark gray, etc.</p>
                    <div class="image-container ">
                        <img src="/imgs/intro/intro_ex06.png" alt="Nature of Code Image" />
                    </div>
                    <p>This is why noise was originally invented. You tweak the parameters a bit or play with color to make
                        the resulting image look more like marble or wood or any other organic texture.</p>
                    <p>Let’s take a quick look at how to implement two-dimensional noise in Processing. If you wanted to color
                        every pixel of a window randomly, you would need a nested loop, one that accessed each pixel and
                        picked a random brightness.</p>
                    <div class="source-code">
                        <a class="toggle" href="#" data-to-raw='Показать исходники' data-to-formatted='Показать отформатированный'>Показать исходники</a>
                        <textarea>loadPixels(); for (int x = 0; x
                            < width; x++) { for (int y=0 ; y < height; y++) { // A random brightness! float bright=r andom(255); pixels[x+y*width]=c olor(bright); } } updatePixels();</textarea>
                        <div class="code-block">
                            <div class='code-comment-pair no-comment'><code><pre><span class='one-line'><span class="n">loadPixels</span><span class="o">();</span></span>
<span class='one-line'><span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">width</span><span class="o">;</span> <span class="n">x</span><span class="o">++)</span> <span class="o">{</span></span>
<span class='one-line'>  <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="n">height</span><span class="o">;</span> <span class="n">y</span><span class="o">++)</span> <span class="o">{</span></span></pre></code></div>
                            <div class='code-comment-pair '>
                                <div class='code-comment '>A random brightness!</div><code><pre><span class='one-line'>    <span class="kt">float</span> <span class="n">bright</span> <span class="o">=</span> <span class="n">random</span><span class="o">(</span><span class="mi">255</span><span class="o">);</span></span>
<span class='one-line'>    <span class="n">pixels</span><span class="o">[</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="o">*</span><span class="n">width</span><span class="o">]</span> <span class="o">=</span> <span class="n">color</span><span class="o">(</span><span class="n">bright</span><span class="o">);</span></span>
<span class='one-line'>  <span class="o">}</span></span>
<span class='one-line'><span class="o">}</span></span>
<span class='one-line'><span class="n">updatePixels</span><span class="o">();</span></span></pre></code></div>
                        </div>
                        <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
                    </div>
                    <p>To color each pixel according to the <span class="function">noise()</span> function, we’ll do exactly
                        the same thing, only instead of calling <span class="function">random()</span> we’ll call <span class="function">noise()</span>.</p>
                    <div class="source-code">
                        <a class="toggle" href="#" data-to-raw='Показать исходники' data-to-formatted='Показать отформатированный'>Показать исходники</a>
                        <textarea> // A Perlin noise brightness! float bright = map(noise(x,y),0,1,0,255); //[bold]</textarea>
                        <div class="code-block">
                            <div class='code-comment-pair '>
                                <div class='code-comment '>A Perlin noise brightness!</div><code><pre><span class='one-line'>   <strong><span class="kt">float</span> <span class="n">bright</span> <span class="o">=</span> <span class="n">map</span><span class="o">(</span><span class="n">noise</span><span class="o">(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">),</span><span class="mi">0</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="mi">255</span><span class="o">);</span></strong></span></pre></code></div>
                        </div>
                        <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
                    </div>
                    <p>This is a nice start conceptually—it gives you a noise value for every (<span class="var">x</span>,
                        <span
                            class="var">y</span>) location in our two-dimensional space. The problem is that this won’t have the cloudy quality
                            we want. Jumping from pixel 200 to pixel 201 is too large of a jump through noise. Remember,
                            when we worked with one-dimensional noise, we incremented our time variable by 0.01 each frame,
                            not by 1! A pretty good solution to this problem is to just use different variables for the noise
                            arguments. For example, we could increment a variable called <span class="var">xoff</span> each
                            time we move horizontally, and a <span class="var">yoff</span> variable each time we move vertically
                            through the nested loops.</p>
                    <p>
                        <a id="intro_example6" style="display: block;"></a><span class="example">Example I.6: 2D Perlin noise</span></p>
                    <div class="source-code">
                        <a class="toggle" href="#" data-to-raw='Показать исходники' data-to-formatted='Показать отформатированный'>Показать исходники</a>
                        <textarea>// Start xoff at 0. float xoff = 0.0; //[bold] for (int x = 0; x
                            < width; x++) { // For every xoff, start yoff at 0. float yoff=0 .0; //[bold] for (int y=0 ; y < height; y++) { // Use xoff and yoff for noise(). float bright=m ap(noise(xoff,yoff),0,1,0,255); //[bold] // Use x and y for pixel location. pixels[x+y*width]=c olor(bright); // Increment yoff. yoff +=0 .01; //[bold] } // Increment xoff. xoff +=0 .01; //[bold] }</textarea>
                        <div class="code-block">
                            <div class='code-comment-pair '>
                                <div class='code-comment '>Start xoff at 0.</div><code><pre><span class='one-line'><strong><span class="kt">float</span> <span class="n">xoff</span> <span class="o">=</span> <span class="mf">0.0</span><span class="o">;</span></strong></span>
<span class='one-line'> </span>
<span class='one-line'><span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">width</span><span class="o">;</span> <span class="n">x</span><span class="o">++)</span> <span class="o">{</span></span></pre></code></div>
                            <div class='code-comment-pair '>
                                <div class='code-comment '>For every xoff, start yoff at 0.</div><code><pre><span class='one-line'>  <strong><span class="kt">float</span> <span class="n">yoff</span> <span class="o">=</span> <span class="mf">0.0</span><span class="o">;</span></strong></span>
<span class='one-line'> </span>
<span class='one-line'>  <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="n">height</span><span class="o">;</span> <span class="n">y</span><span class="o">++)</span> <span class="o">{</span></span></pre></code></div>
                            <div class='code-comment-pair '>
                                <div class='code-comment '>Use xoff and yoff for noise().</div><code><pre><span class='one-line'>    <strong><span class="kt">float</span> <span class="n">bright</span> <span class="o">=</span> <span class="n">map</span><span class="o">(</span><span class="n">noise</span><span class="o">(</span><span class="n">xoff</span><span class="o">,</span><span class="n">yoff</span><span class="o">),</span><span class="mi">0</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="mi">255</span><span class="o">);</span></strong></span></pre></code></div>
                            <div class='code-comment-pair '>
                                <div class='code-comment '>Use x and y for pixel location.</div><code><pre><span class='one-line'>    <span class="n">pixels</span><span class="o">[</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="o">*</span><span class="n">width</span><span class="o">]</span> <span class="o">=</span> <span class="n">color</span><span class="o">(</span><span class="n">bright</span><span class="o">);</span></span></pre></code></div>
                            <div class='code-comment-pair '>
                                <div class='code-comment '>Increment yoff.</div><code><pre><span class='one-line'>    <strong><span class="n">yoff</span> <span class="o">+=</span> <span class="mf">0.01</span><span class="o">;</span></strong></span>
<span class='one-line'>  <span class="o">}</span></span></pre></code></div>
                            <div class='code-comment-pair '>
                                <div class='code-comment '>Increment xoff.</div><code><pre><span class='one-line'>  <strong><span class="n">xoff</span> <span class="o">+=</span> <span class="mf">0.01</span><span class="o">;</span></strong></span>
<span class='one-line'><span class="o">}</span></span></pre></code></div>
                        </div>
                        <div style="position: relative;clear:both;display:block;height:1px;width:100%;"></div>
                    </div>
                    <div class="example">
                        <a id="intro_exercise8" style="display: block;"></a>
                        <h5 id="exercise-i8">Exercise I.8</h5>
                        <p>Play with color, <span class="function">noiseDetail()</span>, and the rate at which <span class="var">xoff</span>                            and <span class="var">yoff</span> are incremented to achieve different visual effects.</p>
                    </div>
                    <div class="example">
                        <a id="intro_exercise9" style="display: block;"></a>
                        <h5 id="exercise-i9">Exercise I.9</h5>
                        <p>Add a third argument to noise that increments once per cycle through <span class="function">draw()</span>                            to animate the two-dimensional noise.</p>
                    </div>
                    <div class="example">
                        <a id="intro_exercise10" style="display: block;"></a>
                        <h5 id="exercise-i10">Exercise I.10</h5>
                        <p>Use the noise values as the elevations of a landscape. See the screenshot below as a reference.</p>
                        <div class="image-container ">
                            <img src="/imgs/intro/intro_exc10.png" alt="Nature of Code Image" />
                        </div>
                    </div>
                    <p>We’ve examined several traditional uses of Perlin noise in this section. With one-dimensional noise,
                        we used smooth values to assign the location of an object to give the appearance of wandering. With
                        two-dimensional noise, we created a cloudy pattern with smoothed values on a plane of pixels. It’s
                        important to remember, however, that Perlin noise values are just that—values. They aren’t inherently
                        tied to pixel locations or color. Any example in this book that has a variable could be controlled
                        via Perlin noise. When we model a wind force, its strength could be controlled by Perlin noise. Same
                        goes for the angles between the branches in a fractal tree pattern, or the speed and direction of
                        objects moving along a grid in a flow field simulation.</p>
                    <a id="intro_figure12" style="display: block;"></a>
                    <div class="image-container two-col">
                        <canvas data-processing-sources="/processingjs/intro/TreeStochasticNoise/TreeStochasticNoise.pde" class="two-col">
                            <p>Ваш браузер не поддерживает canvas тег.</p>
                        </canvas>
                        <div class="sketch-controls">
                            <button class="reset">СБРОС</button>
                            <button class="pause">ПАУЗА</button>
                        </div>
                        <p class="caption">Figure I.12: Tree with Perlin noise</p>
                    </div>
                    <a id="intro_figure13" style="display: block;"></a>
                    <div class="image-container two-col">
                        <canvas data-processing-sources="/processingjs/intro/_6_04_Flowfield/_6_04_Flowfield.pde /processingjs/intro/_6_04_Flowfield/FlowField.pde /processingjs/intro/_6_04_Flowfield/Vehicle.pde"
                            class="two-col">
                            <p>Ваш браузер не поддерживает canvas тег.</p>
                        </canvas>
                        <div class="sketch-controls">
                            <button class="reset">СБРОС</button>
                            <button class="pause">ПАУЗА</button>
                        </div>
                        <p class="caption">Figure I.13: Flow field with Perlin noise</p>
                    </div>
                </section>
            </section>
            <section>
                <a id="intro_section7" style="display: block;"></a>
                <h3 id="i7-onward">I.7 Onward</h3>
                <p>We began this chapter by talking about how randomness can be a crutch. In many ways, it’s the most obvious
                    answer to the kinds of questions we ask continuously—how should this object move? What color should it
                    be? This obvious answer, however, can also be a lazy one.</p>
                <p>As we finish off the introduction, it’s also worth noting that we could just as easily fall into the trap
                    of using Perlin noise as a crutch. How should this object move? Perlin noise! What color should it be?
                    Perlin noise! How fast should it grow? Perlin noise!</p>
                <p>The point of all of this is not to say that you should or shouldn’t use randomness. Or that you should or
                    shouldn’t use Perlin noise. The point is that the rules of your system are defined by you, and the larger
                    your toolbox, the more choices you’ll have as you implement those rules. The goal of this book is to
                    fill your toolbox. If all you know is random, then your design thinking is limited. Sure, Perlin noise
                    helps, but you’ll need more. A lot more.</p>
                <p>I think we’re ready to begin.</p>
                <div style="page-break-after:always;"> </div>
            </section>
        </div>
    </div>
    <div id="bottom">
        <div id="footer">
            <div class="one-third" id="licenses">
                <h4>Licenses</h4>
                <p>
                    <a class="license-badge" rel="license" href="http://creativecommons.org/licenses/by-nc/3.0/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-nc/3.0/88x31.png" /></a>
                    <a class="license-badge" rel="license" href="http://creativecommons.org/licenses/LGPL/2.1/"><img alt="LGPL License" style="border-width:0" src="http://www.gnu.org/graphics/lgplv3-88x31.png" /></a>
                </p>
                <p>
                    The book's text and illustrations are licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc/3.0/">Creative Commons Attribution-NonCommercial 3.0 Unported License</a>.
                </p>
                <p>
                    All of the book's source code is licensed under the <a rel="license" href="http://creativecommons.org/licenses/LGPL/2.1/">GNU Lesser General Public License</a>                    as published by the Free Software Foundation; either version 2.1 of the License, or (at your option)
                    any later version.
                </p>
            </div>
        </div>
    </div>
    <script>
        document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] +
            ':35729/livereload.js?snipver=1"></' + 'script>')
    </script>
</body>

</html>